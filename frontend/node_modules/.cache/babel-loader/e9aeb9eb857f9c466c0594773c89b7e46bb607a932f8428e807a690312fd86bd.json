{"ast":null,"code":"import _slicedToArray from \"C:/Users/indexae/Desktop/scm\\u9000\\u8D27/scm/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _createForOfIteratorHelper from \"C:/Users/indexae/Desktop/scm\\u9000\\u8D27/scm/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _toConsumableArray from \"C:/Users/indexae/Desktop/scm\\u9000\\u8D27/scm/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.some.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { defineStore } from 'pinia';\nexport var useTagsViewStore = defineStore('tagsView', {\n  state: function state() {\n    return {\n      visitedViews: [],\n      cachedViews: []\n    };\n  },\n  actions: {\n    addView: function addView(view) {\n      this.addVisitedView(view);\n      this.addCachedView(view);\n    },\n    addVisitedView: function addVisitedView(view) {\n      var _view$meta;\n      if (this.visitedViews.some(function (v) {\n        return v.path === view.path;\n      })) return;\n      this.visitedViews.push(Object.assign({}, view, {\n        title: ((_view$meta = view.meta) === null || _view$meta === void 0 ? void 0 : _view$meta.title) || 'no-name'\n      }));\n    },\n    addCachedView: function addCachedView(view) {\n      var _view$meta2;\n      if (this.cachedViews.includes(view.name)) return;\n      if (!((_view$meta2 = view.meta) !== null && _view$meta2 !== void 0 && _view$meta2.noCache)) {\n        this.cachedViews.push(view.name);\n      }\n    },\n    delView: function delView(view) {\n      var _this = this;\n      return new Promise(function (resolve) {\n        _this.delVisitedView(view);\n        _this.delCachedView(view);\n        resolve({\n          visitedViews: _toConsumableArray(_this.visitedViews),\n          cachedViews: _toConsumableArray(_this.cachedViews)\n        });\n      });\n    },\n    delVisitedView: function delVisitedView(view) {\n      var _this2 = this;\n      return new Promise(function (resolve) {\n        var _iterator = _createForOfIteratorHelper(_this2.visitedViews.entries()),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var _step$value = _slicedToArray(_step.value, 2),\n              i = _step$value[0],\n              v = _step$value[1];\n            if (v.path === view.path) {\n              _this2.visitedViews.splice(i, 1);\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n        resolve(_toConsumableArray(_this2.visitedViews));\n      });\n    },\n    delCachedView: function delCachedView(view) {\n      var _this3 = this;\n      return new Promise(function (resolve) {\n        var index = _this3.cachedViews.indexOf(view.name);\n        index > -1 && _this3.cachedViews.splice(index, 1);\n        resolve(_toConsumableArray(_this3.cachedViews));\n      });\n    },\n    delOthersViews: function delOthersViews(view) {\n      var _this4 = this;\n      return new Promise(function (resolve) {\n        _this4.delOthersVisitedViews(view);\n        _this4.delOthersCachedViews(view);\n        resolve({\n          visitedViews: _toConsumableArray(_this4.visitedViews),\n          cachedViews: _toConsumableArray(_this4.cachedViews)\n        });\n      });\n    },\n    delOthersVisitedViews: function delOthersVisitedViews(view) {\n      var _this5 = this;\n      return new Promise(function (resolve) {\n        _this5.visitedViews = _this5.visitedViews.filter(function (v) {\n          var _v$meta;\n          return ((_v$meta = v.meta) === null || _v$meta === void 0 ? void 0 : _v$meta.affix) || v.path === view.path;\n        });\n        resolve(_toConsumableArray(_this5.visitedViews));\n      });\n    },\n    delOthersCachedViews: function delOthersCachedViews(view) {\n      var _this6 = this;\n      return new Promise(function (resolve) {\n        var index = _this6.cachedViews.indexOf(view.name);\n        if (index > -1) {\n          _this6.cachedViews = _this6.cachedViews.slice(index, index + 1);\n        } else {\n          _this6.cachedViews = [];\n        }\n        resolve(_toConsumableArray(_this6.cachedViews));\n      });\n    },\n    delAllViews: function delAllViews() {\n      var _this7 = this;\n      return new Promise(function (resolve) {\n        _this7.delAllVisitedViews();\n        _this7.delAllCachedViews();\n        resolve({\n          visitedViews: _toConsumableArray(_this7.visitedViews),\n          cachedViews: _toConsumableArray(_this7.cachedViews)\n        });\n      });\n    },\n    delAllVisitedViews: function delAllVisitedViews() {\n      var _this8 = this;\n      return new Promise(function (resolve) {\n        _this8.visitedViews = _this8.visitedViews.filter(function (tag) {\n          var _tag$meta;\n          return (_tag$meta = tag.meta) === null || _tag$meta === void 0 ? void 0 : _tag$meta.affix;\n        });\n        resolve(_toConsumableArray(_this8.visitedViews));\n      });\n    },\n    delAllCachedViews: function delAllCachedViews() {\n      var _this9 = this;\n      return new Promise(function (resolve) {\n        _this9.cachedViews = [];\n        resolve(_toConsumableArray(_this9.cachedViews));\n      });\n    },\n    updateVisitedView: function updateVisitedView(view) {\n      var _iterator2 = _createForOfIteratorHelper(this.visitedViews),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var v = _step2.value;\n          if (v.path === view.path) {\n            v = Object.assign(v, view);\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }\n});","map":{"version":3,"names":["defineStore","useTagsViewStore","state","visitedViews","cachedViews","actions","addView","view","addVisitedView","addCachedView","_view$meta","some","v","path","push","Object","assign","title","meta","_view$meta2","includes","name","noCache","delView","_this","Promise","resolve","delVisitedView","delCachedView","_toConsumableArray","_this2","_iterator","_createForOfIteratorHelper","entries","_step","s","n","done","_step$value","_slicedToArray","value","i","splice","err","e","f","_this3","index","indexOf","delOthersViews","_this4","delOthersVisitedViews","delOthersCachedViews","_this5","filter","_v$meta","affix","_this6","slice","delAllViews","_this7","delAllVisitedViews","delAllCachedViews","_this8","tag","_tag$meta","_this9","updateVisitedView","_iterator2","_step2"],"sources":["C:/Users/indexae/Desktop/scm退货/scm/frontend/src/stores/tagsView.js"],"sourcesContent":["import { defineStore } from 'pinia'\r\n\r\nexport const useTagsViewStore = defineStore('tagsView', {\r\n  state: () => ({\r\n    visitedViews: [],\r\n    cachedViews: []\r\n  }),\r\n\r\n  actions: {\r\n    addView(view) {\r\n      this.addVisitedView(view)\r\n      this.addCachedView(view)\r\n    },\r\n\r\n    addVisitedView(view) {\r\n      if (this.visitedViews.some(v => v.path === view.path)) return\r\n      this.visitedViews.push(\r\n        Object.assign({}, view, {\r\n          title: view.meta?.title || 'no-name'\r\n        })\r\n      )\r\n    },\r\n\r\n    addCachedView(view) {\r\n      if (this.cachedViews.includes(view.name)) return\r\n      if (!view.meta?.noCache) {\r\n        this.cachedViews.push(view.name)\r\n      }\r\n    },\r\n\r\n    delView(view) {\r\n      return new Promise(resolve => {\r\n        this.delVisitedView(view)\r\n        this.delCachedView(view)\r\n        resolve({\r\n          visitedViews: [...this.visitedViews],\r\n          cachedViews: [...this.cachedViews]\r\n        })\r\n      })\r\n    },\r\n\r\n    delVisitedView(view) {\r\n      return new Promise(resolve => {\r\n        for (const [i, v] of this.visitedViews.entries()) {\r\n          if (v.path === view.path) {\r\n            this.visitedViews.splice(i, 1)\r\n            break\r\n          }\r\n        }\r\n        resolve([...this.visitedViews])\r\n      })\r\n    },\r\n\r\n    delCachedView(view) {\r\n      return new Promise(resolve => {\r\n        const index = this.cachedViews.indexOf(view.name)\r\n        index > -1 && this.cachedViews.splice(index, 1)\r\n        resolve([...this.cachedViews])\r\n      })\r\n    },\r\n\r\n    delOthersViews(view) {\r\n      return new Promise(resolve => {\r\n        this.delOthersVisitedViews(view)\r\n        this.delOthersCachedViews(view)\r\n        resolve({\r\n          visitedViews: [...this.visitedViews],\r\n          cachedViews: [...this.cachedViews]\r\n        })\r\n      })\r\n    },\r\n\r\n    delOthersVisitedViews(view) {\r\n      return new Promise(resolve => {\r\n        this.visitedViews = this.visitedViews.filter(v => {\r\n          return v.meta?.affix || v.path === view.path\r\n        })\r\n        resolve([...this.visitedViews])\r\n      })\r\n    },\r\n\r\n    delOthersCachedViews(view) {\r\n      return new Promise(resolve => {\r\n        const index = this.cachedViews.indexOf(view.name)\r\n        if (index > -1) {\r\n          this.cachedViews = this.cachedViews.slice(index, index + 1)\r\n        } else {\r\n          this.cachedViews = []\r\n        }\r\n        resolve([...this.cachedViews])\r\n      })\r\n    },\r\n\r\n    delAllViews() {\r\n      return new Promise(resolve => {\r\n        this.delAllVisitedViews()\r\n        this.delAllCachedViews()\r\n        resolve({\r\n          visitedViews: [...this.visitedViews],\r\n          cachedViews: [...this.cachedViews]\r\n        })\r\n      })\r\n    },\r\n\r\n    delAllVisitedViews() {\r\n      return new Promise(resolve => {\r\n        this.visitedViews = this.visitedViews.filter(tag => tag.meta?.affix)\r\n        resolve([...this.visitedViews])\r\n      })\r\n    },\r\n\r\n    delAllCachedViews() {\r\n      return new Promise(resolve => {\r\n        this.cachedViews = []\r\n        resolve([...this.cachedViews])\r\n      })\r\n    },\r\n\r\n    updateVisitedView(view) {\r\n      for (let v of this.visitedViews) {\r\n        if (v.path === view.path) {\r\n          v = Object.assign(v, view)\r\n          break\r\n        }\r\n      }\r\n    }\r\n  }\r\n}) "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}