{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/indexae/Desktop/scm\\u65E5\\u5FD7/scm/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/indexae/Desktop/scm\\u65E5\\u5FD7/scm/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { ref, onMounted } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { ElMessage } from 'element-plus';\nexport default {\n  __name: 'detail',\n  setup: function setup(__props, _ref) {\n    var __expose = _ref.expose;\n    __expose();\n    var route = useRoute();\n    var router = useRouter();\n\n    // 商品详情数据\n    var detail = ref({\n      code: '',\n      name: '',\n      categoryName: '',\n      spec: '',\n      unit: '',\n      price: 0,\n      stock: 0,\n      status: '',\n      remark: '',\n      createTime: '',\n      updateTime: ''\n    });\n\n    // 格式化金额\n    var formatAmount = function formatAmount(amount) {\n      if (!amount) return '0.00';\n      return Number(amount).toFixed(2);\n    };\n\n    // 获取商品详情\n    var getDetail = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id) {\n        var response, result;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return fetch(\"/api/products/\".concat(id));\n            case 3:\n              response = _context.sent;\n              _context.next = 6;\n              return response.json();\n            case 6:\n              result = _context.sent;\n              if (result.code === 0) {\n                detail.value = result.data;\n              } else {\n                ElMessage.error(result.message || '获取商品详情失败');\n              }\n              _context.next = 14;\n              break;\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              console.error('获取商品详情失败:', _context.t0);\n              ElMessage.error('获取商品详情失败');\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 10]]);\n      }));\n      return function getDetail(_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    // 返回\n    var handleBack = function handleBack() {\n      router.push('/dashboard/product/info');\n    };\n    onMounted(function () {\n      if (route.query.id) {\n        getDetail(route.query.id);\n      }\n    });\n    var __returned__ = {\n      route: route,\n      router: router,\n      detail: detail,\n      formatAmount: formatAmount,\n      getDetail: getDetail,\n      handleBack: handleBack,\n      ref: ref,\n      onMounted: onMounted,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get ElMessage() {\n        return ElMessage;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRoute","useRouter","ElMessage","route","router","detail","code","name","categoryName","spec","unit","price","stock","status","remark","createTime","updateTime","formatAmount","amount","Number","toFixed","getDetail","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","id","response","result","wrap","_callee$","_context","prev","next","fetch","concat","sent","json","value","data","error","message","t0","console","stop","_x","apply","arguments","handleBack","push","query"],"sources":["C:/Users/indexae/Desktop/scm日志/scm/frontend/src/views/product/info/detail.vue"],"sourcesContent":["<template>\r\n  <div class=\"product-detail\">\r\n    <el-card class=\"box-card\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span>商品详情</span>\r\n          <el-button @click=\"handleBack\">返回</el-button>\r\n        </div>\r\n      </template>\r\n\r\n      <el-descriptions :column=\"2\" border>\r\n        <el-descriptions-item label=\"商品编码\">{{ detail.code }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"商品名称\">{{ detail.name }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"商品分类\">{{ detail.categoryName }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"规格\">{{ detail.spec }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"单位\">{{ detail.unit }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"价格\">{{ formatAmount(detail.price) }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"状态\">\r\n          <el-tag :type=\"detail.status === 'enabled' ? 'success' : 'danger'\" disable-transitions>\r\n            {{ detail.status === 'enabled' ? '启用' : '禁用' }}\r\n          </el-tag>\r\n        </el-descriptions-item>\r\n        <el-descriptions-item label=\"库存\">{{ detail.stock }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"备注\" :span=\"2\">{{ detail.remark }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"创建时间\" :span=\"2\">{{ detail.createTime }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"更新时间\" :span=\"2\">{{ detail.updateTime }}</el-descriptions-item>\r\n      </el-descriptions>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { ElMessage } from 'element-plus'\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\n\r\n// 商品详情数据\r\nconst detail = ref({\r\n  code: '',\r\n  name: '',\r\n  categoryName: '',\r\n  spec: '',\r\n  unit: '',\r\n  price: 0,\r\n  stock: 0,\r\n  status: '',\r\n  remark: '',\r\n  createTime: '',\r\n  updateTime: ''\r\n})\r\n\r\n// 格式化金额\r\nconst formatAmount = (amount) => {\r\n  if (!amount) return '0.00'\r\n  return Number(amount).toFixed(2)\r\n}\r\n\r\n// 获取商品详情\r\nconst getDetail = async (id) => {\r\n  try {\r\n    const response = await fetch(`/api/products/${id}`)\r\n    const result = await response.json()\r\n    if (result.code === 0) {\r\n      detail.value = result.data\r\n    } else {\r\n      ElMessage.error(result.message || '获取商品详情失败')\r\n    }\r\n  } catch (error) {\r\n    console.error('获取商品详情失败:', error)\r\n    ElMessage.error('获取商品详情失败')\r\n  }\r\n}\r\n\r\n// 返回\r\nconst handleBack = () => {\r\n  router.push('/dashboard/product/info')\r\n}\r\n\r\nonMounted(() => {\r\n  if (route.query.id) {\r\n    getDetail(route.query.id)\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.product-detail {\r\n  height: 100%;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n</style> "],"mappings":";;;;;;;AAgCA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,SAASC,QAAQ,EAAEC,SAAS,QAAQ,YAAY;AAChD,SAASC,SAAS,QAAQ,cAAc;;;;;;IAExC,IAAMC,KAAK,GAAGH,QAAQ,CAAC,CAAC;IACxB,IAAMI,MAAM,GAAGH,SAAS,CAAC,CAAC;;IAE1B;IACA,IAAMI,MAAM,GAAGP,GAAG,CAAC;MACjBQ,IAAI,EAAE,EAAE;MACRC,IAAI,EAAE,EAAE;MACRC,YAAY,EAAE,EAAE;MAChBC,IAAI,EAAE,EAAE;MACRC,IAAI,EAAE,EAAE;MACRC,KAAK,EAAE,CAAC;MACRC,KAAK,EAAE,CAAC;MACRC,MAAM,EAAE,EAAE;MACVC,MAAM,EAAE,EAAE;MACVC,UAAU,EAAE,EAAE;MACdC,UAAU,EAAE;IACd,CAAC,CAAC;;IAEF;IACA,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAIC,MAAM,EAAK;MAC/B,IAAI,CAACA,MAAM,EAAE,OAAO,MAAM;MAC1B,OAAOC,MAAM,CAACD,MAAM,CAAC,CAACE,OAAO,CAAC,CAAC,CAAC;IAClC,CAAC;;IAED;IACA,IAAMC,SAAS;MAAA,IAAAC,KAAA,GAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,EAAE;QAAA,IAAAC,QAAA,EAAAC,MAAA;QAAA,OAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAEAC,KAAK,kBAAAC,MAAA,CAAkBT,EAAE,CAAE,CAAC;YAAA;cAA7CC,QAAQ,GAAAI,QAAA,CAAAK,IAAA;cAAAL,QAAA,CAAAE,IAAA;cAAA,OACON,QAAQ,CAACU,IAAI,CAAC,CAAC;YAAA;cAA9BT,MAAM,GAAAG,QAAA,CAAAK,IAAA;cACZ,IAAIR,MAAM,CAACvB,IAAI,KAAK,CAAC,EAAE;gBACrBD,MAAM,CAACkC,KAAK,GAAGV,MAAM,CAACW,IAAI;cAC5B,CAAC,MAAM;gBACLtC,SAAS,CAACuC,KAAK,CAACZ,MAAM,CAACa,OAAO,IAAI,UAAU,CAAC;cAC/C;cAACV,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAW,EAAA,GAAAX,QAAA;cAEDY,OAAO,CAACH,KAAK,CAAC,WAAW,EAAAT,QAAA,CAAAW,EAAO,CAAC;cACjCzC,SAAS,CAACuC,KAAK,CAAC,UAAU,CAAC;YAAA;YAAA;cAAA,OAAAT,QAAA,CAAAa,IAAA;UAAA;QAAA,GAAAnB,OAAA;MAAA,CAE9B;MAAA,gBAbKL,SAASA,CAAAyB,EAAA;QAAA,OAAAxB,KAAA,CAAAyB,KAAA,OAAAC,SAAA;MAAA;IAAA,GAad;;IAED;IACA,IAAMC,UAAU,GAAG,SAAbA,UAAUA,CAAA,EAAS;MACvB7C,MAAM,CAAC8C,IAAI,CAAC,yBAAyB,CAAC;IACxC,CAAC;IAEDnD,SAAS,CAAC,YAAM;MACd,IAAII,KAAK,CAACgD,KAAK,CAACxB,EAAE,EAAE;QAClBN,SAAS,CAAClB,KAAK,CAACgD,KAAK,CAACxB,EAAE,CAAC;MAC3B;IACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}