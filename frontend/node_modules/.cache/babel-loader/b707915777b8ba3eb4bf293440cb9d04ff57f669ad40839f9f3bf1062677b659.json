{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/indexae/Desktop/scm\\u9000\\u8D27/scm/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/indexae/Desktop/scm\\u9000\\u8D27/scm/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { ref, reactive, onMounted, onUnmounted } from 'vue';\nimport { ElMessage } from 'element-plus';\nimport * as echarts from 'echarts';\n\n// 图表实例\n\nexport default {\n  __name: 'index',\n  setup: function setup(__props, _ref) {\n    var __expose = _ref.expose;\n    __expose();\n    var incomeChartRef = ref(null);\n    var expenseChartRef = ref(null);\n    var trendChartRef = ref(null);\n    var incomeChart = null;\n    var expenseChart = null;\n    var trendChart = null;\n\n    // 搜索表单数据\n    var searchForm = reactive({\n      dateRange: []\n    });\n\n    // 日期快捷选项\n    var dateShortcuts = [{\n      text: '最近一周',\n      value: function value() {\n        var end = new Date();\n        var start = new Date();\n        start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\n        return [start, end];\n      }\n    }, {\n      text: '最近一个月',\n      value: function value() {\n        var end = new Date();\n        var start = new Date();\n        start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\n        return [start, end];\n      }\n    }, {\n      text: '最近三个月',\n      value: function value() {\n        var end = new Date();\n        var start = new Date();\n        start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\n        return [start, end];\n      }\n    }];\n\n    // 统计数据\n    var statistics = reactive({\n      totalIncome: 0,\n      totalExpense: 0,\n      netIncome: 0\n    });\n\n    // 获取财务统计数据\n    var getFinanceStatistics = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var params, response, result;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              params = new URLSearchParams();\n              if (searchForm.dateRange && searchForm.dateRange.length === 2) {\n                params.append('startDate', searchForm.dateRange[0]);\n                params.append('endDate', searchForm.dateRange[1]);\n              }\n              _context.next = 5;\n              return fetch(\"http://127.0.0.1:8080/api/finance/statistics?\".concat(params.toString()), {\n                headers: {\n                  'Accept': 'application/json'\n                },\n                credentials: 'include'\n              });\n            case 5:\n              response = _context.sent;\n              _context.next = 8;\n              return response.json();\n            case 8:\n              result = _context.sent;\n              if (result.code === 0 && result.data) {\n                Object.assign(statistics, {\n                  totalIncome: result.data.totalIncome || 0,\n                  totalExpense: result.data.totalExpense || 0,\n                  netIncome: (result.data.totalIncome || 0) - (result.data.totalExpense || 0)\n                });\n\n                // 更新图表数据\n                updateIncomeChart(result.data.incomeByType || []);\n                updateExpenseChart(result.data.expenseByType || []);\n                updateTrendChart(result.data.dailyTrend || []);\n              } else {\n                ElMessage.error(result.message || '获取财务统计数据失败');\n              }\n              _context.next = 16;\n              break;\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](0);\n              console.error('获取财务统计数据失败:', _context.t0);\n              ElMessage.error('获取财务统计数据失败');\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 12]]);\n      }));\n      return function getFinanceStatistics() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    // 初始化收入分布图表\n    var initIncomeChart = function initIncomeChart() {\n      if (!incomeChartRef.value) return;\n      incomeChart = echarts.init(incomeChartRef.value);\n      var option = {\n        title: {\n          text: '收入分布',\n          left: 'center'\n        },\n        tooltip: {\n          trigger: 'item',\n          formatter: '{b}: {c} ({d}%)'\n        },\n        legend: {\n          orient: 'vertical',\n          left: 'left'\n        },\n        series: [{\n          type: 'pie',\n          radius: '50%',\n          data: [],\n          emphasis: {\n            itemStyle: {\n              shadowBlur: 10,\n              shadowOffsetX: 0,\n              shadowColor: 'rgba(0, 0, 0, 0.5)'\n            }\n          }\n        }]\n      };\n      incomeChart.setOption(option);\n    };\n\n    // 更新收入分布图表\n    var updateIncomeChart = function updateIncomeChart(data) {\n      if (!incomeChart) return;\n      var chartData = data.map(function (item) {\n        return {\n          name: item.type === 'sale' ? '销售收入' : '其他收入',\n          value: item.amount\n        };\n      });\n      incomeChart.setOption({\n        series: [{\n          data: chartData\n        }]\n      });\n    };\n\n    // 初始化支出分布图表\n    var initExpenseChart = function initExpenseChart() {\n      if (!expenseChartRef.value) return;\n      expenseChart = echarts.init(expenseChartRef.value);\n      var option = {\n        title: {\n          text: '支出分布',\n          left: 'center'\n        },\n        tooltip: {\n          trigger: 'item',\n          formatter: '{b}: {c} ({d}%)'\n        },\n        legend: {\n          orient: 'vertical',\n          left: 'left'\n        },\n        series: [{\n          type: 'pie',\n          radius: '50%',\n          data: [],\n          emphasis: {\n            itemStyle: {\n              shadowBlur: 10,\n              shadowOffsetX: 0,\n              shadowColor: 'rgba(0, 0, 0, 0.5)'\n            }\n          }\n        }]\n      };\n      expenseChart.setOption(option);\n    };\n\n    // 更新支出分布图表\n    var updateExpenseChart = function updateExpenseChart(data) {\n      if (!expenseChart) return;\n      var chartData = data.map(function (item) {\n        return {\n          name: item.type === 'purchase' ? '采购支出' : '其他支出',\n          value: item.amount\n        };\n      });\n      expenseChart.setOption({\n        series: [{\n          data: chartData\n        }]\n      });\n    };\n\n    // 初始化收支趋势图表\n    var initTrendChart = function initTrendChart() {\n      if (!trendChartRef.value) return;\n      trendChart = echarts.init(trendChartRef.value);\n      var option = {\n        title: {\n          text: '收支趋势',\n          left: 'center'\n        },\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'cross',\n            label: {\n              backgroundColor: '#6a7985'\n            }\n          }\n        },\n        legend: {\n          data: ['收入', '支出', '净收入'],\n          top: 30\n        },\n        grid: {\n          left: '3%',\n          right: '4%',\n          bottom: '3%',\n          containLabel: true\n        },\n        xAxis: {\n          type: 'category',\n          boundaryGap: false,\n          data: []\n        },\n        yAxis: {\n          type: 'value'\n        },\n        series: [{\n          name: '收入',\n          type: 'line',\n          data: []\n        }, {\n          name: '支出',\n          type: 'line',\n          data: []\n        }, {\n          name: '净收入',\n          type: 'line',\n          data: []\n        }]\n      };\n      trendChart.setOption(option);\n    };\n\n    // 更新收支趋势图表\n    var updateTrendChart = function updateTrendChart(data) {\n      if (!trendChart) return;\n      var dates = data.map(function (item) {\n        return item.date;\n      });\n      var incomes = data.map(function (item) {\n        return item.income;\n      });\n      var expenses = data.map(function (item) {\n        return item.expense;\n      });\n      var netIncomes = data.map(function (item) {\n        return item.income - item.expense;\n      });\n      trendChart.setOption({\n        xAxis: {\n          data: dates\n        },\n        series: [{\n          name: '收入',\n          data: incomes\n        }, {\n          name: '支出',\n          data: expenses\n        }, {\n          name: '净收入',\n          data: netIncomes\n        }]\n      });\n    };\n\n    // 搜索\n    var handleSearch = function handleSearch() {\n      getFinanceStatistics();\n    };\n\n    // 重置搜索\n    var handleReset = function handleReset() {\n      searchForm.dateRange = [];\n      handleSearch();\n    };\n\n    // 初始化\n    onMounted(function () {\n      // 初始化图表\n      initIncomeChart();\n      initExpenseChart();\n      initTrendChart();\n\n      // 获取数据\n      getFinanceStatistics();\n\n      // 监听窗口大小变化\n      window.addEventListener('resize', handleResize);\n    });\n\n    // 销毁\n    onUnmounted(function () {\n      // 移除事件监听\n      window.removeEventListener('resize', handleResize);\n\n      // 销毁图表实例\n      if (incomeChart) {\n        incomeChart.dispose();\n        incomeChart = null;\n      }\n      if (expenseChart) {\n        expenseChart.dispose();\n        expenseChart = null;\n      }\n      if (trendChart) {\n        trendChart.dispose();\n        trendChart = null;\n      }\n    });\n\n    // 处理窗口大小变化\n    var handleResize = function handleResize() {\n      var _incomeChart, _expenseChart, _trendChart;\n      (_incomeChart = incomeChart) === null || _incomeChart === void 0 || _incomeChart.resize();\n      (_expenseChart = expenseChart) === null || _expenseChart === void 0 || _expenseChart.resize();\n      (_trendChart = trendChart) === null || _trendChart === void 0 || _trendChart.resize();\n    };\n    var __returned__ = {\n      incomeChartRef: incomeChartRef,\n      expenseChartRef: expenseChartRef,\n      trendChartRef: trendChartRef,\n      get incomeChart() {\n        return incomeChart;\n      },\n      set incomeChart(v) {\n        incomeChart = v;\n      },\n      get expenseChart() {\n        return expenseChart;\n      },\n      set expenseChart(v) {\n        expenseChart = v;\n      },\n      get trendChart() {\n        return trendChart;\n      },\n      set trendChart(v) {\n        trendChart = v;\n      },\n      searchForm: searchForm,\n      dateShortcuts: dateShortcuts,\n      statistics: statistics,\n      getFinanceStatistics: getFinanceStatistics,\n      initIncomeChart: initIncomeChart,\n      updateIncomeChart: updateIncomeChart,\n      initExpenseChart: initExpenseChart,\n      updateExpenseChart: updateExpenseChart,\n      initTrendChart: initTrendChart,\n      updateTrendChart: updateTrendChart,\n      handleSearch: handleSearch,\n      handleReset: handleReset,\n      handleResize: handleResize,\n      ref: ref,\n      reactive: reactive,\n      onMounted: onMounted,\n      onUnmounted: onUnmounted,\n      get ElMessage() {\n        return ElMessage;\n      },\n      get echarts() {\n        return echarts;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","onMounted","onUnmounted","ElMessage","echarts","incomeChartRef","expenseChartRef","trendChartRef","incomeChart","expenseChart","trendChart","searchForm","dateRange","dateShortcuts","text","value","end","Date","start","setTime","getTime","statistics","totalIncome","totalExpense","netIncome","getFinanceStatistics","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","params","response","result","wrap","_callee$","_context","prev","next","URLSearchParams","length","append","fetch","concat","toString","headers","credentials","sent","json","code","data","Object","assign","updateIncomeChart","incomeByType","updateExpenseChart","expenseByType","updateTrendChart","dailyTrend","error","message","t0","console","stop","apply","arguments","initIncomeChart","init","option","title","left","tooltip","trigger","formatter","legend","orient","series","type","radius","emphasis","itemStyle","shadowBlur","shadowOffsetX","shadowColor","setOption","chartData","map","item","name","amount","initExpenseChart","initTrendChart","axisPointer","label","backgroundColor","top","grid","right","bottom","containLabel","xAxis","boundaryGap","yAxis","dates","date","incomes","income","expenses","expense","netIncomes","handleSearch","handleReset","window","addEventListener","handleResize","removeEventListener","dispose","_incomeChart","_expenseChart","_trendChart","resize"],"sources":["C:/Users/indexae/Desktop/scm退货/scm/frontend/src/views/finance/report/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"finance-report\">\r\n    <el-card>\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span>财务报表</span>\r\n        </div>\r\n      </template>\r\n\r\n      <!-- 搜索表单 -->\r\n      <el-form :model=\"searchForm\" class=\"search-form\" inline>\r\n        <el-form-item label=\"时间范围\">\r\n          <el-date-picker\r\n            v-model=\"searchForm.dateRange\"\r\n            type=\"daterange\"\r\n            range-separator=\"至\"\r\n            start-placeholder=\"开始日期\"\r\n            end-placeholder=\"结束日期\"\r\n            value-format=\"YYYY-MM-DD\"\r\n            :shortcuts=\"dateShortcuts\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"handleSearch\">查询</el-button>\r\n          <el-button @click=\"handleReset\">重置</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <!-- 统计卡片 -->\r\n      <div class=\"statistics-cards\">\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"8\">\r\n            <el-card shadow=\"hover\">\r\n              <template #header>\r\n                <div class=\"card-header\">\r\n                  <span>总收入</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"card-content income\">\r\n                <span class=\"amount\">¥ {{ statistics.totalIncome.toFixed(2) }}</span>\r\n              </div>\r\n            </el-card>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-card shadow=\"hover\">\r\n              <template #header>\r\n                <div class=\"card-header\">\r\n                  <span>总支出</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"card-content expense\">\r\n                <span class=\"amount\">¥ {{ statistics.totalExpense.toFixed(2) }}</span>\r\n              </div>\r\n            </el-card>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-card shadow=\"hover\">\r\n              <template #header>\r\n                <div class=\"card-header\">\r\n                  <span>净收入</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"card-content net-income\">\r\n                <span class=\"amount\" :class=\"{ 'negative': statistics.netIncome < 0 }\">\r\n                  ¥ {{ statistics.netIncome.toFixed(2) }}\r\n                </span>\r\n              </div>\r\n            </el-card>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n\r\n      <!-- 图表区域 -->\r\n      <div class=\"charts-container\">\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"12\">\r\n            <div class=\"chart-wrapper\">\r\n              <div ref=\"incomeChartRef\" class=\"chart\"></div>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <div class=\"chart-wrapper\">\r\n              <div ref=\"expenseChartRef\" class=\"chart\"></div>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <div class=\"chart-wrapper\">\r\n              <div ref=\"trendChartRef\" class=\"chart\"></div>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted, onUnmounted } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport * as echarts from 'echarts'\r\n\r\n// 图表实例\r\nconst incomeChartRef = ref(null)\r\nconst expenseChartRef = ref(null)\r\nconst trendChartRef = ref(null)\r\nlet incomeChart = null\r\nlet expenseChart = null\r\nlet trendChart = null\r\n\r\n// 搜索表单数据\r\nconst searchForm = reactive({\r\n  dateRange: []\r\n})\r\n\r\n// 日期快捷选项\r\nconst dateShortcuts = [\r\n  {\r\n    text: '最近一周',\r\n    value: () => {\r\n      const end = new Date()\r\n      const start = new Date()\r\n      start.setTime(start.getTime() - 3600 * 1000 * 24 * 7)\r\n      return [start, end]\r\n    }\r\n  },\r\n  {\r\n    text: '最近一个月',\r\n    value: () => {\r\n      const end = new Date()\r\n      const start = new Date()\r\n      start.setTime(start.getTime() - 3600 * 1000 * 24 * 30)\r\n      return [start, end]\r\n    }\r\n  },\r\n  {\r\n    text: '最近三个月',\r\n    value: () => {\r\n      const end = new Date()\r\n      const start = new Date()\r\n      start.setTime(start.getTime() - 3600 * 1000 * 24 * 90)\r\n      return [start, end]\r\n    }\r\n  }\r\n]\r\n\r\n// 统计数据\r\nconst statistics = reactive({\r\n  totalIncome: 0,\r\n  totalExpense: 0,\r\n  netIncome: 0\r\n})\r\n\r\n// 获取财务统计数据\r\nconst getFinanceStatistics = async () => {\r\n  try {\r\n    const params = new URLSearchParams()\r\n    if (searchForm.dateRange && searchForm.dateRange.length === 2) {\r\n      params.append('startDate', searchForm.dateRange[0])\r\n      params.append('endDate', searchForm.dateRange[1])\r\n    }\r\n    \r\n    const response = await fetch(`http://127.0.0.1:8080/api/finance/statistics?${params.toString()}`, {\r\n      headers: {\r\n        'Accept': 'application/json'\r\n      },\r\n      credentials: 'include'\r\n    })\r\n    const result = await response.json()\r\n    if (result.code === 0 && result.data) {\r\n      Object.assign(statistics, {\r\n        totalIncome: result.data.totalIncome || 0,\r\n        totalExpense: result.data.totalExpense || 0,\r\n        netIncome: (result.data.totalIncome || 0) - (result.data.totalExpense || 0)\r\n      })\r\n      \r\n      // 更新图表数据\r\n      updateIncomeChart(result.data.incomeByType || [])\r\n      updateExpenseChart(result.data.expenseByType || [])\r\n      updateTrendChart(result.data.dailyTrend || [])\r\n    } else {\r\n      ElMessage.error(result.message || '获取财务统计数据失败')\r\n    }\r\n  } catch (error) {\r\n    console.error('获取财务统计数据失败:', error)\r\n    ElMessage.error('获取财务统计数据失败')\r\n  }\r\n}\r\n\r\n// 初始化收入分布图表\r\nconst initIncomeChart = () => {\r\n  if (!incomeChartRef.value) return\r\n  \r\n  incomeChart = echarts.init(incomeChartRef.value)\r\n  const option = {\r\n    title: {\r\n      text: '收入分布',\r\n      left: 'center'\r\n    },\r\n    tooltip: {\r\n      trigger: 'item',\r\n      formatter: '{b}: {c} ({d}%)'\r\n    },\r\n    legend: {\r\n      orient: 'vertical',\r\n      left: 'left'\r\n    },\r\n    series: [\r\n      {\r\n        type: 'pie',\r\n        radius: '50%',\r\n        data: [],\r\n        emphasis: {\r\n          itemStyle: {\r\n            shadowBlur: 10,\r\n            shadowOffsetX: 0,\r\n            shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n          }\r\n        }\r\n      }\r\n    ]\r\n  }\r\n  incomeChart.setOption(option)\r\n}\r\n\r\n// 更新收入分布图表\r\nconst updateIncomeChart = (data) => {\r\n  if (!incomeChart) return\r\n  \r\n  const chartData = data.map(item => ({\r\n    name: item.type === 'sale' ? '销售收入' : '其他收入',\r\n    value: item.amount\r\n  }))\r\n  \r\n  incomeChart.setOption({\r\n    series: [{\r\n      data: chartData\r\n    }]\r\n  })\r\n}\r\n\r\n// 初始化支出分布图表\r\nconst initExpenseChart = () => {\r\n  if (!expenseChartRef.value) return\r\n  \r\n  expenseChart = echarts.init(expenseChartRef.value)\r\n  const option = {\r\n    title: {\r\n      text: '支出分布',\r\n      left: 'center'\r\n    },\r\n    tooltip: {\r\n      trigger: 'item',\r\n      formatter: '{b}: {c} ({d}%)'\r\n    },\r\n    legend: {\r\n      orient: 'vertical',\r\n      left: 'left'\r\n    },\r\n    series: [\r\n      {\r\n        type: 'pie',\r\n        radius: '50%',\r\n        data: [],\r\n        emphasis: {\r\n          itemStyle: {\r\n            shadowBlur: 10,\r\n            shadowOffsetX: 0,\r\n            shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n          }\r\n        }\r\n      }\r\n    ]\r\n  }\r\n  expenseChart.setOption(option)\r\n}\r\n\r\n// 更新支出分布图表\r\nconst updateExpenseChart = (data) => {\r\n  if (!expenseChart) return\r\n  \r\n  const chartData = data.map(item => ({\r\n    name: item.type === 'purchase' ? '采购支出' : '其他支出',\r\n    value: item.amount\r\n  }))\r\n  \r\n  expenseChart.setOption({\r\n    series: [{\r\n      data: chartData\r\n    }]\r\n  })\r\n}\r\n\r\n// 初始化收支趋势图表\r\nconst initTrendChart = () => {\r\n  if (!trendChartRef.value) return\r\n  \r\n  trendChart = echarts.init(trendChartRef.value)\r\n  const option = {\r\n    title: {\r\n      text: '收支趋势',\r\n      left: 'center'\r\n    },\r\n    tooltip: {\r\n      trigger: 'axis',\r\n      axisPointer: {\r\n        type: 'cross',\r\n        label: {\r\n          backgroundColor: '#6a7985'\r\n        }\r\n      }\r\n    },\r\n    legend: {\r\n      data: ['收入', '支出', '净收入'],\r\n      top: 30\r\n    },\r\n    grid: {\r\n      left: '3%',\r\n      right: '4%',\r\n      bottom: '3%',\r\n      containLabel: true\r\n    },\r\n    xAxis: {\r\n      type: 'category',\r\n      boundaryGap: false,\r\n      data: []\r\n    },\r\n    yAxis: {\r\n      type: 'value'\r\n    },\r\n    series: [\r\n      {\r\n        name: '收入',\r\n        type: 'line',\r\n        data: []\r\n      },\r\n      {\r\n        name: '支出',\r\n        type: 'line',\r\n        data: []\r\n      },\r\n      {\r\n        name: '净收入',\r\n        type: 'line',\r\n        data: []\r\n      }\r\n    ]\r\n  }\r\n  trendChart.setOption(option)\r\n}\r\n\r\n// 更新收支趋势图表\r\nconst updateTrendChart = (data) => {\r\n  if (!trendChart) return\r\n  \r\n  const dates = data.map(item => item.date)\r\n  const incomes = data.map(item => item.income)\r\n  const expenses = data.map(item => item.expense)\r\n  const netIncomes = data.map(item => item.income - item.expense)\r\n  \r\n  trendChart.setOption({\r\n    xAxis: {\r\n      data: dates\r\n    },\r\n    series: [\r\n      {\r\n        name: '收入',\r\n        data: incomes\r\n      },\r\n      {\r\n        name: '支出',\r\n        data: expenses\r\n      },\r\n      {\r\n        name: '净收入',\r\n        data: netIncomes\r\n      }\r\n    ]\r\n  })\r\n}\r\n\r\n// 搜索\r\nconst handleSearch = () => {\r\n  getFinanceStatistics()\r\n}\r\n\r\n// 重置搜索\r\nconst handleReset = () => {\r\n  searchForm.dateRange = []\r\n  handleSearch()\r\n}\r\n\r\n// 初始化\r\nonMounted(() => {\r\n  // 初始化图表\r\n  initIncomeChart()\r\n  initExpenseChart()\r\n  initTrendChart()\r\n  \r\n  // 获取数据\r\n  getFinanceStatistics()\r\n  \r\n  // 监听窗口大小变化\r\n  window.addEventListener('resize', handleResize)\r\n})\r\n\r\n// 销毁\r\nonUnmounted(() => {\r\n  // 移除事件监听\r\n  window.removeEventListener('resize', handleResize)\r\n  \r\n  // 销毁图表实例\r\n  if (incomeChart) {\r\n    incomeChart.dispose()\r\n    incomeChart = null\r\n  }\r\n  if (expenseChart) {\r\n    expenseChart.dispose()\r\n    expenseChart = null\r\n  }\r\n  if (trendChart) {\r\n    trendChart.dispose()\r\n    trendChart = null\r\n  }\r\n})\r\n\r\n// 处理窗口大小变化\r\nconst handleResize = () => {\r\n  incomeChart?.resize()\r\n  expenseChart?.resize()\r\n  trendChart?.resize()\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.finance-report {\r\n  height: 100%;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.search-form {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.statistics-cards {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card-content {\r\n  text-align: center;\r\n  padding: 20px 0;\r\n}\r\n\r\n.amount {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n}\r\n\r\n.income .amount {\r\n  color: #67C23A;\r\n}\r\n\r\n.expense .amount {\r\n  color: #F56C6C;\r\n}\r\n\r\n.net-income .amount {\r\n  color: #67C23A;\r\n}\r\n\r\n.net-income .amount.negative {\r\n  color: #F56C6C;\r\n}\r\n\r\n.charts-container {\r\n  margin-top: 20px;\r\n}\r\n\r\n.chart-wrapper {\r\n  background: #fff;\r\n  padding: 20px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.chart {\r\n  height: 400px;\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}