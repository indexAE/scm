{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/indexae/Desktop/scm\\u9000\\u8D27/scm/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/indexae/Desktop/scm\\u9000\\u8D27/scm/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.date.to-iso-string.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url.js\";\nimport \"core-js/modules/web.url.to-json.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { ref, onMounted, computed } from 'vue';\nimport { ElMessage } from 'element-plus';\nimport { ArrowUp, ArrowDown } from '@element-plus/icons-vue';\nimport * as echarts from 'echarts';\n\n// 日期范围快捷选项\n\nexport default {\n  __name: 'index',\n  setup: function setup(__props, _ref) {\n    var __expose = _ref.expose;\n    __expose();\n    var dateShortcuts = [{\n      text: '最近一周',\n      value: function value() {\n        var end = new Date();\n        var start = new Date();\n        start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\n        return [start, end];\n      }\n    }, {\n      text: '最近一个月',\n      value: function value() {\n        var end = new Date();\n        var start = new Date();\n        start.setMonth(start.getMonth() - 1);\n        return [start, end];\n      }\n    }, {\n      text: '最近三个月',\n      value: function value() {\n        var end = new Date();\n        var start = new Date();\n        start.setMonth(start.getMonth() - 3);\n        return [start, end];\n      }\n    }];\n\n    // 数据\n    var dateRange = ref([]);\n    var trendType = ref('day');\n    var loading = ref(false);\n    var totalIncome = ref(0);\n    var totalExpense = ref(0);\n    var incomeTrend = ref(0);\n    var expenseTrend = ref(0);\n\n    // 图表引用\n    var trendChartRef = ref(null);\n    var incomeChartRef = ref(null);\n    var expenseChartRef = ref(null);\n    var trendChart = null;\n    var incomeChart = null;\n    var expenseChart = null;\n\n    // 计算属性\n    var netIncome = computed(function () {\n      return totalIncome.value - totalExpense.value;\n    });\n    var netIncomeTrend = computed(function () {\n      if (totalIncome.value === 0 && totalExpense.value === 0) return 0;\n      return (totalIncome.value - totalExpense.value) / Math.max(totalIncome.value, totalExpense.value) * 100;\n    });\n    var dateRangeText = computed(function () {\n      if (!dateRange.value || !dateRange.value[0] || !dateRange.value[1]) return '';\n      var start = dateRange.value[0].toLocaleDateString();\n      var end = dateRange.value[1].toLocaleDateString();\n      return \"\".concat(start, \" \\u81F3 \").concat(end);\n    });\n\n    // 获取财务数据\n    var getFinanceData = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var params, response, result, data;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (!(!dateRange.value || !dateRange.value[0] || !dateRange.value[1])) {\n                _context.next = 2;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 2:\n              loading.value = true;\n              _context.prev = 3;\n              params = {\n                startDate: dateRange.value[0].toISOString().split('T')[0],\n                endDate: dateRange.value[1].toISOString().split('T')[0],\n                type: trendType.value\n              };\n              _context.next = 7;\n              return fetch(\"http://127.0.0.1:8080/api/finance/report?\".concat(new URLSearchParams(params)), {\n                headers: {\n                  'Accept': 'application/json'\n                },\n                credentials: 'include'\n              });\n            case 7:\n              response = _context.sent;\n              _context.next = 10;\n              return response.json();\n            case 10:\n              result = _context.sent;\n              if (result.code === 0) {\n                data = result.data;\n                totalIncome.value = data.totalIncome;\n                totalExpense.value = data.totalExpense;\n                incomeTrend.value = data.incomeTrend;\n                expenseTrend.value = data.expenseTrend;\n\n                // 更新图表\n                updateTrendChart(data.trend);\n                updateIncomeChart(data.incomeComposition);\n                updateExpenseChart(data.expenseComposition);\n              } else {\n                ElMessage.error(result.message || '获取财务数据失败');\n              }\n              _context.next = 18;\n              break;\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](3);\n              console.error('获取财务数据失败:', _context.t0);\n              ElMessage.error('获取财务数据失败');\n            case 18:\n              _context.prev = 18;\n              loading.value = false;\n              return _context.finish(18);\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[3, 14, 18, 21]]);\n      }));\n      return function getFinanceData() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    // 初始化趋势图\n    var initTrendChart = function initTrendChart() {\n      trendChart = echarts.init(trendChartRef.value);\n      var option = {\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'cross',\n            label: {\n              backgroundColor: '#6a7985'\n            }\n          }\n        },\n        legend: {\n          data: ['收入', '支出', '净收入']\n        },\n        grid: {\n          left: '3%',\n          right: '4%',\n          bottom: '3%',\n          containLabel: true\n        },\n        xAxis: {\n          type: 'category',\n          boundaryGap: false,\n          data: []\n        },\n        yAxis: {\n          type: 'value'\n        },\n        series: [{\n          name: '收入',\n          type: 'line',\n          stack: 'Total',\n          areaStyle: {},\n          emphasis: {\n            focus: 'series'\n          },\n          data: []\n        }, {\n          name: '支出',\n          type: 'line',\n          stack: 'Total',\n          areaStyle: {},\n          emphasis: {\n            focus: 'series'\n          },\n          data: []\n        }, {\n          name: '净收入',\n          type: 'line',\n          emphasis: {\n            focus: 'series'\n          },\n          data: []\n        }]\n      };\n      trendChart.setOption(option);\n    };\n\n    // 初始化收入构成图\n    var initIncomeChart = function initIncomeChart() {\n      incomeChart = echarts.init(incomeChartRef.value);\n      var option = {\n        tooltip: {\n          trigger: 'item',\n          formatter: '{a} <br/>{b}: {c} ({d}%)'\n        },\n        legend: {\n          orient: 'vertical',\n          left: 10,\n          data: ['销售收入', '其他收入']\n        },\n        series: [{\n          name: '收入构成',\n          type: 'pie',\n          radius: ['50%', '70%'],\n          avoidLabelOverlap: false,\n          itemStyle: {\n            borderRadius: 10,\n            borderColor: '#fff',\n            borderWidth: 2\n          },\n          label: {\n            show: false,\n            position: 'center'\n          },\n          emphasis: {\n            label: {\n              show: true,\n              fontSize: '20',\n              fontWeight: 'bold'\n            }\n          },\n          labelLine: {\n            show: false\n          },\n          data: []\n        }]\n      };\n      incomeChart.setOption(option);\n    };\n\n    // 初始化支出构成图\n    var initExpenseChart = function initExpenseChart() {\n      expenseChart = echarts.init(expenseChartRef.value);\n      var option = {\n        tooltip: {\n          trigger: 'item',\n          formatter: '{a} <br/>{b}: {c} ({d}%)'\n        },\n        legend: {\n          orient: 'vertical',\n          left: 10,\n          data: ['采购支出', '其他支出']\n        },\n        series: [{\n          name: '支出构成',\n          type: 'pie',\n          radius: ['50%', '70%'],\n          avoidLabelOverlap: false,\n          itemStyle: {\n            borderRadius: 10,\n            borderColor: '#fff',\n            borderWidth: 2\n          },\n          label: {\n            show: false,\n            position: 'center'\n          },\n          emphasis: {\n            label: {\n              show: true,\n              fontSize: '20',\n              fontWeight: 'bold'\n            }\n          },\n          labelLine: {\n            show: false\n          },\n          data: []\n        }]\n      };\n      expenseChart.setOption(option);\n    };\n\n    // 更新趋势图数据\n    var updateTrendChart = function updateTrendChart(data) {\n      var option = {\n        xAxis: {\n          data: data.dates\n        },\n        series: [{\n          name: '收入',\n          data: data.incomes\n        }, {\n          name: '支出',\n          data: data.expenses\n        }, {\n          name: '净收入',\n          data: data.netIncomes\n        }]\n      };\n      trendChart.setOption(option);\n    };\n\n    // 更新收入构成图数据\n    var updateIncomeChart = function updateIncomeChart(data) {\n      var option = {\n        series: [{\n          data: [{\n            value: data.sale,\n            name: '销售收入'\n          }, {\n            value: data.other,\n            name: '其他收入'\n          }]\n        }]\n      };\n      incomeChart.setOption(option);\n    };\n\n    // 更新支出构成图数据\n    var updateExpenseChart = function updateExpenseChart(data) {\n      var option = {\n        series: [{\n          data: [{\n            value: data.purchase,\n            name: '采购支出'\n          }, {\n            value: data.other,\n            name: '其他支出'\n          }]\n        }]\n      };\n      expenseChart.setOption(option);\n    };\n\n    // 处理日期变化\n    var handleDateChange = function handleDateChange() {\n      getFinanceData();\n    };\n\n    // 导出报表\n    var handleExport = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var params, response, blob, url, link, error;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(!dateRange.value || !dateRange.value[0] || !dateRange.value[1])) {\n                _context2.next = 3;\n                break;\n              }\n              ElMessage.warning('请先选择日期范围');\n              return _context2.abrupt(\"return\");\n            case 3:\n              _context2.prev = 3;\n              params = {\n                startDate: dateRange.value[0].toISOString().split('T')[0],\n                endDate: dateRange.value[1].toISOString().split('T')[0]\n              };\n              _context2.next = 7;\n              return fetch(\"http://127.0.0.1:8080/api/finance/report/export?\".concat(new URLSearchParams(params)), {\n                headers: {\n                  'Accept': 'application/octet-stream'\n                },\n                credentials: 'include'\n              });\n            case 7:\n              response = _context2.sent;\n              if (!response.ok) {\n                _context2.next = 22;\n                break;\n              }\n              _context2.next = 11;\n              return response.blob();\n            case 11:\n              blob = _context2.sent;\n              url = window.URL.createObjectURL(blob);\n              link = document.createElement('a');\n              link.href = url;\n              link.download = \"\\u8D22\\u52A1\\u62A5\\u8868_\".concat(params.startDate, \"_\").concat(params.endDate, \".xlsx\");\n              document.body.appendChild(link);\n              link.click();\n              document.body.removeChild(link);\n              window.URL.revokeObjectURL(url);\n              _context2.next = 26;\n              break;\n            case 22:\n              _context2.next = 24;\n              return response.json();\n            case 24:\n              error = _context2.sent;\n              ElMessage.error(error.message || '导出报表失败');\n            case 26:\n              _context2.next = 32;\n              break;\n            case 28:\n              _context2.prev = 28;\n              _context2.t0 = _context2[\"catch\"](3);\n              console.error('导出报表失败:', _context2.t0);\n              ElMessage.error('导出报表失败');\n            case 32:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[3, 28]]);\n      }));\n      return function handleExport() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    // 监听窗口大小变化\n    var handleResize = function handleResize() {\n      var _trendChart, _incomeChart, _expenseChart;\n      (_trendChart = trendChart) === null || _trendChart === void 0 || _trendChart.resize();\n      (_incomeChart = incomeChart) === null || _incomeChart === void 0 || _incomeChart.resize();\n      (_expenseChart = expenseChart) === null || _expenseChart === void 0 || _expenseChart.resize();\n    };\n\n    // 初始化\n    onMounted(function () {\n      // 设置默认日期范围为最近一个月\n      var end = new Date();\n      var start = new Date();\n      start.setMonth(start.getMonth() - 1);\n      dateRange.value = [start, end];\n\n      // 初始化图表\n      initTrendChart();\n      initIncomeChart();\n      initExpenseChart();\n\n      // 获取数据\n      getFinanceData();\n\n      // 监听窗口大小变化\n      window.addEventListener('resize', handleResize);\n    });\n\n    // 组件卸载时移除事件监听\n    onUnmounted(function () {\n      var _trendChart2, _incomeChart2, _expenseChart2;\n      window.removeEventListener('resize', handleResize);\n      (_trendChart2 = trendChart) === null || _trendChart2 === void 0 || _trendChart2.dispose();\n      (_incomeChart2 = incomeChart) === null || _incomeChart2 === void 0 || _incomeChart2.dispose();\n      (_expenseChart2 = expenseChart) === null || _expenseChart2 === void 0 || _expenseChart2.dispose();\n    });\n    var __returned__ = {\n      dateShortcuts: dateShortcuts,\n      dateRange: dateRange,\n      trendType: trendType,\n      loading: loading,\n      totalIncome: totalIncome,\n      totalExpense: totalExpense,\n      incomeTrend: incomeTrend,\n      expenseTrend: expenseTrend,\n      trendChartRef: trendChartRef,\n      incomeChartRef: incomeChartRef,\n      expenseChartRef: expenseChartRef,\n      get trendChart() {\n        return trendChart;\n      },\n      set trendChart(v) {\n        trendChart = v;\n      },\n      get incomeChart() {\n        return incomeChart;\n      },\n      set incomeChart(v) {\n        incomeChart = v;\n      },\n      get expenseChart() {\n        return expenseChart;\n      },\n      set expenseChart(v) {\n        expenseChart = v;\n      },\n      netIncome: netIncome,\n      netIncomeTrend: netIncomeTrend,\n      dateRangeText: dateRangeText,\n      getFinanceData: getFinanceData,\n      initTrendChart: initTrendChart,\n      initIncomeChart: initIncomeChart,\n      initExpenseChart: initExpenseChart,\n      updateTrendChart: updateTrendChart,\n      updateIncomeChart: updateIncomeChart,\n      updateExpenseChart: updateExpenseChart,\n      handleDateChange: handleDateChange,\n      handleExport: handleExport,\n      handleResize: handleResize,\n      ref: ref,\n      onMounted: onMounted,\n      computed: computed,\n      get ElMessage() {\n        return ElMessage;\n      },\n      get ArrowUp() {\n        return ArrowUp;\n      },\n      get ArrowDown() {\n        return ArrowDown;\n      },\n      get echarts() {\n        return echarts;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","ElMessage","ArrowUp","ArrowDown","echarts","dateShortcuts","text","value","end","Date","start","setTime","getTime","setMonth","getMonth","dateRange","trendType","loading","totalIncome","totalExpense","incomeTrend","expenseTrend","trendChartRef","incomeChartRef","expenseChartRef","trendChart","incomeChart","expenseChart","netIncome","netIncomeTrend","Math","max","dateRangeText","toLocaleDateString","concat","getFinanceData","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","params","response","result","data","wrap","_callee$","_context","prev","next","abrupt","startDate","toISOString","split","endDate","type","fetch","URLSearchParams","headers","credentials","sent","json","code","updateTrendChart","trend","updateIncomeChart","incomeComposition","updateExpenseChart","expenseComposition","error","message","t0","console","finish","stop","apply","arguments","initTrendChart","init","option","tooltip","trigger","axisPointer","label","backgroundColor","legend","grid","left","right","bottom","containLabel","xAxis","boundaryGap","yAxis","series","name","stack","areaStyle","emphasis","focus","setOption","initIncomeChart","formatter","orient","radius","avoidLabelOverlap","itemStyle","borderRadius","borderColor","borderWidth","show","position","fontSize","fontWeight","labelLine","initExpenseChart","dates","incomes","expenses","netIncomes","sale","other","purchase","handleDateChange","handleExport","_ref3","_callee2","blob","url","link","_callee2$","_context2","warning","ok","window","URL","createObjectURL","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","handleResize","_trendChart","_incomeChart","_expenseChart","resize","addEventListener","onUnmounted","_trendChart2","_incomeChart2","_expenseChart2","removeEventListener","dispose"],"sources":["C:/Users/indexae/Desktop/scm退货/scm/frontend/src/views/finance/report/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"finance-report\">\r\n    <el-card>\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span>财务报表</span>\r\n          <div class=\"header-right\">\r\n            <el-date-picker\r\n              v-model=\"dateRange\"\r\n              type=\"daterange\"\r\n              range-separator=\"至\"\r\n              start-placeholder=\"开始日期\"\r\n              end-placeholder=\"结束日期\"\r\n              :shortcuts=\"dateShortcuts\"\r\n              @change=\"handleDateChange\"\r\n            />\r\n            <el-button type=\"primary\" @click=\"handleExport\">导出报表</el-button>\r\n          </div>\r\n        </div>\r\n      </template>\r\n\r\n      <!-- 统计卡片 -->\r\n      <el-row :gutter=\"20\" class=\"statistics-cards\">\r\n        <el-col :span=\"8\">\r\n          <el-card shadow=\"hover\">\r\n            <template #header>\r\n              <div class=\"card-header\">\r\n                <span>总收入</span>\r\n                <el-tag type=\"success\">{{ dateRangeText }}</el-tag>\r\n              </div>\r\n            </template>\r\n            <div class=\"card-amount\">\r\n              <span class=\"amount\">¥{{ totalIncome }}</span>\r\n              <span class=\"trend\" :class=\"{ up: incomeTrend > 0, down: incomeTrend < 0 }\">\r\n                {{ Math.abs(incomeTrend) }}%\r\n                <el-icon><ArrowUp v-if=\"incomeTrend > 0\" /><ArrowDown v-if=\"incomeTrend < 0\" /></el-icon>\r\n              </span>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-card shadow=\"hover\">\r\n            <template #header>\r\n              <div class=\"card-header\">\r\n                <span>总支出</span>\r\n                <el-tag type=\"danger\">{{ dateRangeText }}</el-tag>\r\n              </div>\r\n            </template>\r\n            <div class=\"card-amount\">\r\n              <span class=\"amount\">¥{{ totalExpense }}</span>\r\n              <span class=\"trend\" :class=\"{ up: expenseTrend > 0, down: expenseTrend < 0 }\">\r\n                {{ Math.abs(expenseTrend) }}%\r\n                <el-icon><ArrowUp v-if=\"expenseTrend > 0\" /><ArrowDown v-if=\"expenseTrend < 0\" /></el-icon>\r\n              </span>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-card shadow=\"hover\">\r\n            <template #header>\r\n              <div class=\"card-header\">\r\n                <span>净收入</span>\r\n                <el-tag type=\"info\">{{ dateRangeText }}</el-tag>\r\n              </div>\r\n            </template>\r\n            <div class=\"card-amount\">\r\n              <span class=\"amount\" :class=\"{ 'negative': netIncome < 0 }\">¥{{ netIncome }}</span>\r\n              <span class=\"trend\" :class=\"{ up: netIncomeTrend > 0, down: netIncomeTrend < 0 }\">\r\n                {{ Math.abs(netIncomeTrend) }}%\r\n                <el-icon><ArrowUp v-if=\"netIncomeTrend > 0\" /><ArrowDown v-if=\"netIncomeTrend < 0\" /></el-icon>\r\n              </span>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <!-- 图表区域 -->\r\n      <div class=\"charts-container\">\r\n        <!-- 收支趋势图 -->\r\n        <el-card class=\"chart-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <span>收支趋势</span>\r\n              <el-radio-group v-model=\"trendType\" size=\"small\">\r\n                <el-radio-button label=\"day\">日</el-radio-button>\r\n                <el-radio-button label=\"week\">周</el-radio-button>\r\n                <el-radio-button label=\"month\">月</el-radio-button>\r\n              </el-radio-group>\r\n            </div>\r\n          </template>\r\n          <div ref=\"trendChartRef\" class=\"chart\"></div>\r\n        </el-card>\r\n\r\n        <!-- 收入构成 -->\r\n        <el-card class=\"chart-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <span>收入构成</span>\r\n            </div>\r\n          </template>\r\n          <div ref=\"incomeChartRef\" class=\"chart\"></div>\r\n        </el-card>\r\n\r\n        <!-- 支出构成 -->\r\n        <el-card class=\"chart-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <span>支出构成</span>\r\n            </div>\r\n          </template>\r\n          <div ref=\"expenseChartRef\" class=\"chart\"></div>\r\n        </el-card>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { ArrowUp, ArrowDown } from '@element-plus/icons-vue'\r\nimport * as echarts from 'echarts'\r\n\r\n// 日期范围快捷选项\r\nconst dateShortcuts = [\r\n  {\r\n    text: '最近一周',\r\n    value: () => {\r\n      const end = new Date()\r\n      const start = new Date()\r\n      start.setTime(start.getTime() - 3600 * 1000 * 24 * 7)\r\n      return [start, end]\r\n    }\r\n  },\r\n  {\r\n    text: '最近一个月',\r\n    value: () => {\r\n      const end = new Date()\r\n      const start = new Date()\r\n      start.setMonth(start.getMonth() - 1)\r\n      return [start, end]\r\n    }\r\n  },\r\n  {\r\n    text: '最近三个月',\r\n    value: () => {\r\n      const end = new Date()\r\n      const start = new Date()\r\n      start.setMonth(start.getMonth() - 3)\r\n      return [start, end]\r\n    }\r\n  }\r\n]\r\n\r\n// 数据\r\nconst dateRange = ref([])\r\nconst trendType = ref('day')\r\nconst loading = ref(false)\r\nconst totalIncome = ref(0)\r\nconst totalExpense = ref(0)\r\nconst incomeTrend = ref(0)\r\nconst expenseTrend = ref(0)\r\n\r\n// 图表引用\r\nconst trendChartRef = ref(null)\r\nconst incomeChartRef = ref(null)\r\nconst expenseChartRef = ref(null)\r\nlet trendChart = null\r\nlet incomeChart = null\r\nlet expenseChart = null\r\n\r\n// 计算属性\r\nconst netIncome = computed(() => totalIncome.value - totalExpense.value)\r\nconst netIncomeTrend = computed(() => {\r\n  if (totalIncome.value === 0 && totalExpense.value === 0) return 0\r\n  return ((totalIncome.value - totalExpense.value) / Math.max(totalIncome.value, totalExpense.value)) * 100\r\n})\r\n\r\nconst dateRangeText = computed(() => {\r\n  if (!dateRange.value || !dateRange.value[0] || !dateRange.value[1]) return ''\r\n  const start = dateRange.value[0].toLocaleDateString()\r\n  const end = dateRange.value[1].toLocaleDateString()\r\n  return `${start} 至 ${end}`\r\n})\r\n\r\n// 获取财务数据\r\nconst getFinanceData = async () => {\r\n  if (!dateRange.value || !dateRange.value[0] || !dateRange.value[1]) return\r\n  \r\n  loading.value = true\r\n  try {\r\n    const params = {\r\n      startDate: dateRange.value[0].toISOString().split('T')[0],\r\n      endDate: dateRange.value[1].toISOString().split('T')[0],\r\n      type: trendType.value\r\n    }\r\n    \r\n    const response = await fetch(`http://127.0.0.1:8080/api/finance/report?${new URLSearchParams(params)}`, {\r\n      headers: {\r\n        'Accept': 'application/json'\r\n      },\r\n      credentials: 'include'\r\n    })\r\n    \r\n    const result = await response.json()\r\n    if (result.code === 0) {\r\n      const data = result.data\r\n      totalIncome.value = data.totalIncome\r\n      totalExpense.value = data.totalExpense\r\n      incomeTrend.value = data.incomeTrend\r\n      expenseTrend.value = data.expenseTrend\r\n      \r\n      // 更新图表\r\n      updateTrendChart(data.trend)\r\n      updateIncomeChart(data.incomeComposition)\r\n      updateExpenseChart(data.expenseComposition)\r\n    } else {\r\n      ElMessage.error(result.message || '获取财务数据失败')\r\n    }\r\n  } catch (error) {\r\n    console.error('获取财务数据失败:', error)\r\n    ElMessage.error('获取财务数据失败')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// 初始化趋势图\r\nconst initTrendChart = () => {\r\n  trendChart = echarts.init(trendChartRef.value)\r\n  const option = {\r\n    tooltip: {\r\n      trigger: 'axis',\r\n      axisPointer: {\r\n        type: 'cross',\r\n        label: {\r\n          backgroundColor: '#6a7985'\r\n        }\r\n      }\r\n    },\r\n    legend: {\r\n      data: ['收入', '支出', '净收入']\r\n    },\r\n    grid: {\r\n      left: '3%',\r\n      right: '4%',\r\n      bottom: '3%',\r\n      containLabel: true\r\n    },\r\n    xAxis: {\r\n      type: 'category',\r\n      boundaryGap: false,\r\n      data: []\r\n    },\r\n    yAxis: {\r\n      type: 'value'\r\n    },\r\n    series: [\r\n      {\r\n        name: '收入',\r\n        type: 'line',\r\n        stack: 'Total',\r\n        areaStyle: {},\r\n        emphasis: {\r\n          focus: 'series'\r\n        },\r\n        data: []\r\n      },\r\n      {\r\n        name: '支出',\r\n        type: 'line',\r\n        stack: 'Total',\r\n        areaStyle: {},\r\n        emphasis: {\r\n          focus: 'series'\r\n        },\r\n        data: []\r\n      },\r\n      {\r\n        name: '净收入',\r\n        type: 'line',\r\n        emphasis: {\r\n          focus: 'series'\r\n        },\r\n        data: []\r\n      }\r\n    ]\r\n  }\r\n  trendChart.setOption(option)\r\n}\r\n\r\n// 初始化收入构成图\r\nconst initIncomeChart = () => {\r\n  incomeChart = echarts.init(incomeChartRef.value)\r\n  const option = {\r\n    tooltip: {\r\n      trigger: 'item',\r\n      formatter: '{a} <br/>{b}: {c} ({d}%)'\r\n    },\r\n    legend: {\r\n      orient: 'vertical',\r\n      left: 10,\r\n      data: ['销售收入', '其他收入']\r\n    },\r\n    series: [\r\n      {\r\n        name: '收入构成',\r\n        type: 'pie',\r\n        radius: ['50%', '70%'],\r\n        avoidLabelOverlap: false,\r\n        itemStyle: {\r\n          borderRadius: 10,\r\n          borderColor: '#fff',\r\n          borderWidth: 2\r\n        },\r\n        label: {\r\n          show: false,\r\n          position: 'center'\r\n        },\r\n        emphasis: {\r\n          label: {\r\n            show: true,\r\n            fontSize: '20',\r\n            fontWeight: 'bold'\r\n          }\r\n        },\r\n        labelLine: {\r\n          show: false\r\n        },\r\n        data: []\r\n      }\r\n    ]\r\n  }\r\n  incomeChart.setOption(option)\r\n}\r\n\r\n// 初始化支出构成图\r\nconst initExpenseChart = () => {\r\n  expenseChart = echarts.init(expenseChartRef.value)\r\n  const option = {\r\n    tooltip: {\r\n      trigger: 'item',\r\n      formatter: '{a} <br/>{b}: {c} ({d}%)'\r\n    },\r\n    legend: {\r\n      orient: 'vertical',\r\n      left: 10,\r\n      data: ['采购支出', '其他支出']\r\n    },\r\n    series: [\r\n      {\r\n        name: '支出构成',\r\n        type: 'pie',\r\n        radius: ['50%', '70%'],\r\n        avoidLabelOverlap: false,\r\n        itemStyle: {\r\n          borderRadius: 10,\r\n          borderColor: '#fff',\r\n          borderWidth: 2\r\n        },\r\n        label: {\r\n          show: false,\r\n          position: 'center'\r\n        },\r\n        emphasis: {\r\n          label: {\r\n            show: true,\r\n            fontSize: '20',\r\n            fontWeight: 'bold'\r\n          }\r\n        },\r\n        labelLine: {\r\n          show: false\r\n        },\r\n        data: []\r\n      }\r\n    ]\r\n  }\r\n  expenseChart.setOption(option)\r\n}\r\n\r\n// 更新趋势图数据\r\nconst updateTrendChart = (data) => {\r\n  const option = {\r\n    xAxis: {\r\n      data: data.dates\r\n    },\r\n    series: [\r\n      {\r\n        name: '收入',\r\n        data: data.incomes\r\n      },\r\n      {\r\n        name: '支出',\r\n        data: data.expenses\r\n      },\r\n      {\r\n        name: '净收入',\r\n        data: data.netIncomes\r\n      }\r\n    ]\r\n  }\r\n  trendChart.setOption(option)\r\n}\r\n\r\n// 更新收入构成图数据\r\nconst updateIncomeChart = (data) => {\r\n  const option = {\r\n    series: [\r\n      {\r\n        data: [\r\n          { value: data.sale, name: '销售收入' },\r\n          { value: data.other, name: '其他收入' }\r\n        ]\r\n      }\r\n    ]\r\n  }\r\n  incomeChart.setOption(option)\r\n}\r\n\r\n// 更新支出构成图数据\r\nconst updateExpenseChart = (data) => {\r\n  const option = {\r\n    series: [\r\n      {\r\n        data: [\r\n          { value: data.purchase, name: '采购支出' },\r\n          { value: data.other, name: '其他支出' }\r\n        ]\r\n      }\r\n    ]\r\n  }\r\n  expenseChart.setOption(option)\r\n}\r\n\r\n// 处理日期变化\r\nconst handleDateChange = () => {\r\n  getFinanceData()\r\n}\r\n\r\n// 导出报表\r\nconst handleExport = async () => {\r\n  if (!dateRange.value || !dateRange.value[0] || !dateRange.value[1]) {\r\n    ElMessage.warning('请先选择日期范围')\r\n    return\r\n  }\r\n  \r\n  try {\r\n    const params = {\r\n      startDate: dateRange.value[0].toISOString().split('T')[0],\r\n      endDate: dateRange.value[1].toISOString().split('T')[0]\r\n    }\r\n    \r\n    const response = await fetch(`http://127.0.0.1:8080/api/finance/report/export?${new URLSearchParams(params)}`, {\r\n      headers: {\r\n        'Accept': 'application/octet-stream'\r\n      },\r\n      credentials: 'include'\r\n    })\r\n    \r\n    if (response.ok) {\r\n      const blob = await response.blob()\r\n      const url = window.URL.createObjectURL(blob)\r\n      const link = document.createElement('a')\r\n      link.href = url\r\n      link.download = `财务报表_${params.startDate}_${params.endDate}.xlsx`\r\n      document.body.appendChild(link)\r\n      link.click()\r\n      document.body.removeChild(link)\r\n      window.URL.revokeObjectURL(url)\r\n    } else {\r\n      const error = await response.json()\r\n      ElMessage.error(error.message || '导出报表失败')\r\n    }\r\n  } catch (error) {\r\n    console.error('导出报表失败:', error)\r\n    ElMessage.error('导出报表失败')\r\n  }\r\n}\r\n\r\n// 监听窗口大小变化\r\nconst handleResize = () => {\r\n  trendChart?.resize()\r\n  incomeChart?.resize()\r\n  expenseChart?.resize()\r\n}\r\n\r\n// 初始化\r\nonMounted(() => {\r\n  // 设置默认日期范围为最近一个月\r\n  const end = new Date()\r\n  const start = new Date()\r\n  start.setMonth(start.getMonth() - 1)\r\n  dateRange.value = [start, end]\r\n  \r\n  // 初始化图表\r\n  initTrendChart()\r\n  initIncomeChart()\r\n  initExpenseChart()\r\n  \r\n  // 获取数据\r\n  getFinanceData()\r\n  \r\n  // 监听窗口大小变化\r\n  window.addEventListener('resize', handleResize)\r\n})\r\n\r\n// 组件卸载时移除事件监听\r\nonUnmounted(() => {\r\n  window.removeEventListener('resize', handleResize)\r\n  trendChart?.dispose()\r\n  incomeChart?.dispose()\r\n  expenseChart?.dispose()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.finance-report {\r\n  padding: 20px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.header-right {\r\n  display: flex;\r\n  gap: 16px;\r\n  align-items: center;\r\n}\r\n\r\n.statistics-cards {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card-amount {\r\n  display: flex;\r\n  align-items: baseline;\r\n  gap: 16px;\r\n}\r\n\r\n.amount {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n}\r\n\r\n.amount.negative {\r\n  color: #f56c6c;\r\n}\r\n\r\n.trend {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  font-size: 14px;\r\n}\r\n\r\n.trend.up {\r\n  color: #67c23a;\r\n}\r\n\r\n.trend.down {\r\n  color: #f56c6c;\r\n}\r\n\r\n.charts-container {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, 1fr);\r\n  gap: 20px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.chart-card:first-child {\r\n  grid-column: 1 / -1;\r\n}\r\n\r\n.chart {\r\n  height: 300px;\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}