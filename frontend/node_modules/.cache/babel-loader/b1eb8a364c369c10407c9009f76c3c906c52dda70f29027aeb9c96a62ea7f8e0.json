{"ast":null,"code":"import _objectSpread from \"C:/Users/indexae/Desktop/scm/scm\\u65E5\\u5FD7/scm/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"C:/Users/indexae/Desktop/scm/scm\\u65E5\\u5FD7/scm/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/indexae/Desktop/scm/scm\\u65E5\\u5FD7/scm/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/esnext.iterator.reduce.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { ref, reactive, onMounted } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { ElMessage } from 'element-plus';\nexport default {\n  __name: 'form',\n  setup: function setup(__props, _ref) {\n    var __expose = _ref.expose;\n    __expose();\n    var route = useRoute();\n    var router = useRouter();\n    var formRef = ref(null);\n    var submitting = ref(false);\n\n    // 获取路由参数\n    var id = route.query.id;\n\n    // 表单数据\n    var form = reactive({\n      orderNo: '',\n      customerId: '',\n      customerName: '',\n      handlerId: '',\n      handlerName: '',\n      totalAmount: 0,\n      remark: '',\n      items: []\n    });\n\n    // 表单验证规则\n    var rules = {\n      customerId: [{\n        required: true,\n        message: '请选择客户',\n        trigger: 'change'\n      }],\n      handlerId: [{\n        required: true,\n        message: '请选择经办人',\n        trigger: 'change'\n      }],\n      items: [{\n        required: true,\n        type: 'array',\n        message: '请添加订单商品',\n        trigger: 'change'\n      }]\n    };\n\n    // 客户列表\n    var customers = ref([]);\n    // 经办人列表\n    var handlers = ref([]);\n    // 商品列表\n    var products = ref([]);\n\n    // 获取客户列表\n    var getCustomers = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var res, data;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return fetch('/api/customers', {\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                credentials: 'include'\n              });\n            case 3:\n              res = _context.sent;\n              _context.next = 6;\n              return res.json();\n            case 6:\n              data = _context.sent;\n              if (data.code === 0) {\n                customers.value = data.data || [];\n                console.log('客户列表数据:', customers.value);\n              } else {\n                ElMessage.error(data.message || '获取客户列表失败');\n              }\n              _context.next = 14;\n              break;\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              console.error('获取客户列表失败:', _context.t0);\n              ElMessage.error('获取客户列表失败');\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 10]]);\n      }));\n      return function getCustomers() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    // 获取经办人列表\n    var getHandlers = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var res, data, _data$data;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return fetch('/api/handlers', {\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                credentials: 'include'\n              });\n            case 3:\n              res = _context2.sent;\n              _context2.next = 6;\n              return res.json();\n            case 6:\n              data = _context2.sent;\n              if (data.code === 0) {\n                handlers.value = ((_data$data = data.data) === null || _data$data === void 0 ? void 0 : _data$data.list) || [];\n                console.log('经办人列表数据:', handlers.value);\n              } else {\n                ElMessage.error(data.message || '获取经办人列表失败');\n              }\n              _context2.next = 14;\n              break;\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error('获取经办人列表失败:', _context2.t0);\n              ElMessage.error('获取经办人列表失败');\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 10]]);\n      }));\n      return function getHandlers() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    // 获取商品列表\n    var getProducts = /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var params, res, data;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              params = new URLSearchParams({\n                offset: '0',\n                limit: '1000' // 获取足够多的商品\n              });\n              _context3.next = 4;\n              return fetch(\"/api/products?\".concat(params), {\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                credentials: 'include'\n              });\n            case 4:\n              res = _context3.sent;\n              _context3.next = 7;\n              return res.json();\n            case 7:\n              data = _context3.sent;\n              if (data.code === 0) {\n                products.value = data.data || [];\n                console.log('商品列表数据:', products.value);\n              } else {\n                ElMessage.error(data.message || '获取商品列表失败');\n              }\n              _context3.next = 15;\n              break;\n            case 11:\n              _context3.prev = 11;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.error('获取商品列表失败:', _context3.t0);\n              ElMessage.error('获取商品列表失败');\n            case 15:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[0, 11]]);\n      }));\n      return function getProducts() {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n\n    // 获取订单详情\n    var getOrderDetail = /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var response, result;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              _context4.next = 3;\n              return fetch(\"/api/sale/orders/\".concat(id), {\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                credentials: 'include'\n              });\n            case 3:\n              response = _context4.sent;\n              _context4.next = 6;\n              return response.json();\n            case 6:\n              result = _context4.sent;\n              if (result.code === 0) {\n                Object.assign(form, result.data);\n              } else {\n                ElMessage.error(result.message || '获取订单详情失败');\n              }\n              _context4.next = 14;\n              break;\n            case 10:\n              _context4.prev = 10;\n              _context4.t0 = _context4[\"catch\"](0);\n              console.error('获取订单详情失败:', _context4.t0);\n              ElMessage.error('获取订单详情失败');\n            case 14:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, null, [[0, 10]]);\n      }));\n      return function getOrderDetail() {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n\n    // 处理客户选择变化\n    var handleCustomerChange = function handleCustomerChange(customerId) {\n      var customer = customers.value.find(function (c) {\n        return c.id === customerId;\n      });\n      if (customer) {\n        form.customerName = customer.name;\n      }\n    };\n\n    // 处理经办人选择变化\n    var handleHandlerChange = function handleHandlerChange(handlerId) {\n      var handler = handlers.value.find(function (h) {\n        return h.id === handlerId;\n      });\n      if (handler) {\n        form.handlerName = handler.name;\n      }\n    };\n\n    // 处理商品选择变化\n    var handleProductChange = function handleProductChange(productId, index) {\n      console.log('选择的商品ID:', productId);\n      console.log('当前商品列表:', products.value);\n      var product = products.value.find(function (p) {\n        return p.id === productId;\n      });\n      console.log('找到的商品:', product);\n      if (product) {\n        form.items[index] = _objectSpread(_objectSpread({}, form.items[index]), {}, {\n          productId: product.id,\n          productName: product.name,\n          spec: product.spec,\n          // 修改字段名以匹配后端\n          unit: product.unit,\n          unitPrice: product.price || 0,\n          // 添加默认值\n          quantity: 1,\n          totalPrice: product.price || 0 // 初始总价等于单价\n        });\n        calculateItemAmount(index);\n      }\n    };\n\n    // 添加商品明细\n    var handleAddItem = function handleAddItem() {\n      form.items.push({\n        productId: '',\n        productName: '',\n        spec: '',\n        // 修改字段名以匹配后端\n        unit: '',\n        quantity: 1,\n        unitPrice: 0,\n        totalPrice: 0\n      });\n    };\n\n    // 删除商品明细\n    var handleDeleteItem = function handleDeleteItem(index) {\n      form.items.splice(index, 1);\n    };\n\n    // 计算商品金额\n    var calculateItemAmount = function calculateItemAmount(index) {\n      var item = form.items[index];\n      item.totalPrice = item.quantity * item.unitPrice;\n      // 计算总金额\n      form.totalAmount = form.items.reduce(function (sum, item) {\n        return sum + (item.totalPrice || 0);\n      }, 0);\n    };\n\n    // 提交表单\n    var handleSubmit = /*#__PURE__*/function () {\n      var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              if (formRef.value) {\n                _context6.next = 2;\n                break;\n              }\n              return _context6.abrupt(\"return\");\n            case 2:\n              _context6.next = 4;\n              return formRef.value.validate(/*#__PURE__*/function () {\n                var _ref7 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(valid) {\n                  var url, method, submitData, response, result;\n                  return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n                    while (1) switch (_context5.prev = _context5.next) {\n                      case 0:\n                        if (!valid) {\n                          _context5.next = 28;\n                          break;\n                        }\n                        if (!(form.items.length === 0)) {\n                          _context5.next = 4;\n                          break;\n                        }\n                        ElMessage.warning('请添加订单商品');\n                        return _context5.abrupt(\"return\");\n                      case 4:\n                        submitting.value = true;\n                        _context5.prev = 5;\n                        url = id ? \"/api/sale/orders/\".concat(id) : '/api/sale/orders';\n                        method = id ? 'PUT' : 'POST'; // 构造提交的数据\n                        submitData = _objectSpread(_objectSpread({}, form), {}, {\n                          customerId: form.customerId,\n                          customerName: form.customerName,\n                          handlerId: form.handlerId,\n                          handlerName: form.handlerName,\n                          items: form.items.map(function (item) {\n                            return {\n                              productId: item.productId,\n                              productName: item.productName,\n                              quantity: item.quantity,\n                              unitPrice: item.unitPrice,\n                              totalPrice: item.totalPrice\n                            };\n                          })\n                        });\n                        console.log('提交的数据:', submitData);\n                        _context5.next = 12;\n                        return fetch(url, {\n                          method: method,\n                          headers: {\n                            'Content-Type': 'application/json',\n                            'Accept': 'application/json'\n                          },\n                          credentials: 'include',\n                          body: JSON.stringify(submitData)\n                        });\n                      case 12:\n                        response = _context5.sent;\n                        if (response.ok) {\n                          _context5.next = 15;\n                          break;\n                        }\n                        throw new Error(\"HTTP error! status: \".concat(response.status));\n                      case 15:\n                        _context5.next = 17;\n                        return response.json();\n                      case 17:\n                        result = _context5.sent;\n                        if (result.code === 0) {\n                          ElMessage.success(id ? '更新成功' : '创建成功');\n                          router.back();\n                        } else {\n                          ElMessage.error(result.message || (id ? '更新失败' : '创建失败'));\n                        }\n                        _context5.next = 25;\n                        break;\n                      case 21:\n                        _context5.prev = 21;\n                        _context5.t0 = _context5[\"catch\"](5);\n                        console.error(id ? '更新订单失败:' : '创建订单失败:', _context5.t0);\n                        ElMessage.error(id ? '更新失败' : '创建失败');\n                      case 25:\n                        _context5.prev = 25;\n                        submitting.value = false;\n                        return _context5.finish(25);\n                      case 28:\n                      case \"end\":\n                        return _context5.stop();\n                    }\n                  }, _callee5, null, [[5, 21, 25, 28]]);\n                }));\n                return function (_x) {\n                  return _ref7.apply(this, arguments);\n                };\n              }());\n            case 4:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6);\n      }));\n      return function handleSubmit() {\n        return _ref6.apply(this, arguments);\n      };\n    }();\n\n    // 初始化\n    onMounted(function () {\n      getCustomers();\n      getHandlers();\n      getProducts();\n      if (id) {\n        getOrderDetail();\n      }\n    });\n    var __returned__ = {\n      route: route,\n      router: router,\n      formRef: formRef,\n      submitting: submitting,\n      id: id,\n      form: form,\n      rules: rules,\n      customers: customers,\n      handlers: handlers,\n      products: products,\n      getCustomers: getCustomers,\n      getHandlers: getHandlers,\n      getProducts: getProducts,\n      getOrderDetail: getOrderDetail,\n      handleCustomerChange: handleCustomerChange,\n      handleHandlerChange: handleHandlerChange,\n      handleProductChange: handleProductChange,\n      handleAddItem: handleAddItem,\n      handleDeleteItem: handleDeleteItem,\n      calculateItemAmount: calculateItemAmount,\n      handleSubmit: handleSubmit,\n      ref: ref,\n      reactive: reactive,\n      onMounted: onMounted,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get ElMessage() {\n        return ElMessage;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","onMounted","useRoute","useRouter","ElMessage","route","router","formRef","submitting","id","query","form","orderNo","customerId","customerName","handlerId","handlerName","totalAmount","remark","items","rules","required","message","trigger","type","customers","handlers","products","getCustomers","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","data","wrap","_callee$","_context","prev","next","fetch","headers","credentials","sent","json","code","value","console","log","error","t0","stop","apply","arguments","getHandlers","_ref3","_callee2","_data$data","_callee2$","_context2","list","getProducts","_ref4","_callee3","params","_callee3$","_context3","URLSearchParams","offset","limit","concat","getOrderDetail","_ref5","_callee4","response","result","_callee4$","_context4","Object","assign","handleCustomerChange","customer","find","c","name","handleHandlerChange","handler","h","handleProductChange","productId","index","product","p","_objectSpread","productName","spec","unit","unitPrice","price","quantity","totalPrice","calculateItemAmount","handleAddItem","push","handleDeleteItem","splice","item","reduce","sum","handleSubmit","_ref6","_callee6","_callee6$","_context6","abrupt","validate","_ref7","_callee5","valid","url","method","submitData","_callee5$","_context5","length","warning","map","body","JSON","stringify","ok","Error","status","success","back","finish","_x"],"sources":["C:/Users/indexae/Desktop/scm/scm日志/scm/frontend/src/views/sale/order/form.vue"],"sourcesContent":["<template>\r\n  <div class=\"sale-order-form\">\r\n    <el-form ref=\"formRef\" :model=\"form\" :rules=\"rules\" label-width=\"100px\">\r\n      <el-form-item label=\"订单编号\">\r\n        <el-input v-model=\"form.orderNo\" disabled />\r\n      </el-form-item>\r\n      \r\n      <el-form-item label=\"客户\" prop=\"customerId\">\r\n        <el-select v-model=\"form.customerId\" placeholder=\"请选择客户\" @change=\"handleCustomerChange\">\r\n          <el-option\r\n            v-for=\"item in customers\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n      \r\n      <el-form-item label=\"经办人\" prop=\"handlerId\">\r\n        <el-select v-model=\"form.handlerId\" placeholder=\"请选择经办人\" @change=\"handleHandlerChange\">\r\n          <el-option\r\n            v-for=\"item in handlers\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n      \r\n      <el-form-item label=\"订单商品\" prop=\"items\">\r\n        <div v-for=\"(item, index) in form.items\" :key=\"index\" class=\"order-item\">\r\n          <el-select\r\n            v-model=\"item.productId\"\r\n            placeholder=\"请选择商品\"\r\n            @change=\"(val) => handleProductChange(val, index)\"\r\n            style=\"width: 200px\"\r\n          >\r\n            <el-option\r\n              v-for=\"product in products\"\r\n              :key=\"product.id\"\r\n              :label=\"product.name\"\r\n              :value=\"product.id\"\r\n            />\r\n          </el-select>\r\n          \r\n          <el-input v-model=\"item.spec\" placeholder=\"规格\" disabled style=\"width: 120px\" />\r\n          <el-input v-model=\"item.unit\" placeholder=\"单位\" disabled style=\"width: 80px\" />\r\n          \r\n          <el-input-number\r\n            v-model=\"item.quantity\"\r\n            :min=\"1\"\r\n            @change=\"() => calculateItemAmount(index)\"\r\n            style=\"width: 120px\"\r\n          />\r\n          \r\n          <el-input-number\r\n            v-model=\"item.unitPrice\"\r\n            :min=\"0\"\r\n            :precision=\"2\"\r\n            @change=\"() => calculateItemAmount(index)\"\r\n            style=\"width: 120px\"\r\n          />\r\n          \r\n          <el-input\r\n            v-model=\"item.totalPrice\"\r\n            disabled\r\n            style=\"width: 120px\"\r\n          />\r\n          \r\n          <el-button type=\"danger\" @click=\"handleDeleteItem(index)\">删除</el-button>\r\n        </div>\r\n        \r\n        <el-button type=\"primary\" @click=\"handleAddItem\">添加商品</el-button>\r\n      </el-form-item>\r\n      \r\n      <el-form-item label=\"总金额\">\r\n        <el-input v-model=\"form.totalAmount\" disabled />\r\n      </el-form-item>\r\n      \r\n      <el-form-item label=\"备注\">\r\n        <el-input\r\n          v-model=\"form.remark\"\r\n          type=\"textarea\"\r\n          :rows=\"3\"\r\n          placeholder=\"请输入备注信息\"\r\n        />\r\n      </el-form-item>\r\n      \r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"handleSubmit\" :loading=\"submitting\">\r\n          {{ id ? '更新' : '创建' }}\r\n        </el-button>\r\n        <el-button @click=\"router.back()\">取消</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { ElMessage } from 'element-plus'\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\nconst formRef = ref(null)\r\nconst submitting = ref(false)\r\n\r\n// 获取路由参数\r\nconst id = route.query.id\r\n\r\n// 表单数据\r\nconst form = reactive({\r\n  orderNo: '',\r\n  customerId: '',\r\n  customerName: '',\r\n  handlerId: '',\r\n  handlerName: '',\r\n  totalAmount: 0,\r\n  remark: '',\r\n  items: []\r\n})\r\n\r\n// 表单验证规则\r\nconst rules = {\r\n  customerId: [{ required: true, message: '请选择客户', trigger: 'change' }],\r\n  handlerId: [{ required: true, message: '请选择经办人', trigger: 'change' }],\r\n  items: [{ required: true, type: 'array', message: '请添加订单商品', trigger: 'change' }]\r\n}\r\n\r\n// 客户列表\r\nconst customers = ref([])\r\n// 经办人列表\r\nconst handlers = ref([])\r\n// 商品列表\r\nconst products = ref([])\r\n\r\n// 获取客户列表\r\nconst getCustomers = async () => {\r\n  try {\r\n    const res = await fetch('/api/customers', {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      credentials: 'include'\r\n    })\r\n    const data = await res.json()\r\n    if (data.code === 0) {\r\n      customers.value = data.data || []\r\n      console.log('客户列表数据:', customers.value)\r\n    } else {\r\n      ElMessage.error(data.message || '获取客户列表失败')\r\n    }\r\n  } catch (error) {\r\n    console.error('获取客户列表失败:', error)\r\n    ElMessage.error('获取客户列表失败')\r\n  }\r\n}\r\n\r\n// 获取经办人列表\r\nconst getHandlers = async () => {\r\n  try {\r\n    const res = await fetch('/api/handlers', {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      credentials: 'include'\r\n    })\r\n    const data = await res.json()\r\n    if (data.code === 0) {\r\n      handlers.value = data.data?.list || []\r\n      console.log('经办人列表数据:', handlers.value)\r\n    } else {\r\n      ElMessage.error(data.message || '获取经办人列表失败')\r\n    }\r\n  } catch (error) {\r\n    console.error('获取经办人列表失败:', error)\r\n    ElMessage.error('获取经办人列表失败')\r\n  }\r\n}\r\n\r\n// 获取商品列表\r\nconst getProducts = async () => {\r\n  try {\r\n    const params = new URLSearchParams({\r\n      offset: '0',\r\n      limit: '1000'  // 获取足够多的商品\r\n    })\r\n    \r\n    const res = await fetch(`/api/products?${params}`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      credentials: 'include'\r\n    })\r\n    const data = await res.json()\r\n    if (data.code === 0) {\r\n      products.value = data.data || []\r\n      console.log('商品列表数据:', products.value)\r\n    } else {\r\n      ElMessage.error(data.message || '获取商品列表失败')\r\n    }\r\n  } catch (error) {\r\n    console.error('获取商品列表失败:', error)\r\n    ElMessage.error('获取商品列表失败')\r\n  }\r\n}\r\n\r\n// 获取订单详情\r\nconst getOrderDetail = async () => {\r\n  try {\r\n    const response = await fetch(`/api/sale/orders/${id}`, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      credentials: 'include'\r\n    })\r\n    const result = await response.json()\r\n    if (result.code === 0) {\r\n      Object.assign(form, result.data)\r\n    } else {\r\n      ElMessage.error(result.message || '获取订单详情失败')\r\n    }\r\n  } catch (error) {\r\n    console.error('获取订单详情失败:', error)\r\n    ElMessage.error('获取订单详情失败')\r\n  }\r\n}\r\n\r\n// 处理客户选择变化\r\nconst handleCustomerChange = (customerId) => {\r\n  const customer = customers.value.find(c => c.id === customerId)\r\n  if (customer) {\r\n    form.customerName = customer.name\r\n  }\r\n}\r\n\r\n// 处理经办人选择变化\r\nconst handleHandlerChange = (handlerId) => {\r\n  const handler = handlers.value.find(h => h.id === handlerId)\r\n  if (handler) {\r\n    form.handlerName = handler.name\r\n  }\r\n}\r\n\r\n// 处理商品选择变化\r\nconst handleProductChange = (productId, index) => {\r\n  console.log('选择的商品ID:', productId)\r\n  console.log('当前商品列表:', products.value)\r\n  const product = products.value.find(p => p.id === productId)\r\n  console.log('找到的商品:', product)\r\n  if (product) {\r\n    form.items[index] = {\r\n      ...form.items[index],\r\n      productId: product.id,\r\n      productName: product.name,\r\n      spec: product.spec,  // 修改字段名以匹配后端\r\n      unit: product.unit,\r\n      unitPrice: product.price || 0,  // 添加默认值\r\n      quantity: 1,\r\n      totalPrice: product.price || 0  // 初始总价等于单价\r\n    }\r\n    calculateItemAmount(index)\r\n  }\r\n}\r\n\r\n// 添加商品明细\r\nconst handleAddItem = () => {\r\n  form.items.push({\r\n    productId: '',\r\n    productName: '',\r\n    spec: '',  // 修改字段名以匹配后端\r\n    unit: '',\r\n    quantity: 1,\r\n    unitPrice: 0,\r\n    totalPrice: 0\r\n  })\r\n}\r\n\r\n// 删除商品明细\r\nconst handleDeleteItem = (index) => {\r\n  form.items.splice(index, 1)\r\n}\r\n\r\n// 计算商品金额\r\nconst calculateItemAmount = (index) => {\r\n  const item = form.items[index]\r\n  item.totalPrice = item.quantity * item.unitPrice\r\n  // 计算总金额\r\n  form.totalAmount = form.items.reduce((sum, item) => sum + (item.totalPrice || 0), 0)\r\n}\r\n\r\n// 提交表单\r\nconst handleSubmit = async () => {\r\n  if (!formRef.value) return\r\n  \r\n  await formRef.value.validate(async (valid) => {\r\n    if (valid) {\r\n      if (form.items.length === 0) {\r\n        ElMessage.warning('请添加订单商品')\r\n        return\r\n      }\r\n\r\n      submitting.value = true\r\n      try {\r\n        const url = id\r\n          ? `/api/sale/orders/${id}`\r\n          : '/api/sale/orders'\r\n        const method = id ? 'PUT' : 'POST'\r\n        \r\n        // 构造提交的数据\r\n        const submitData = {\r\n          ...form,\r\n          customerId: form.customerId,\r\n          customerName: form.customerName,\r\n          handlerId: form.handlerId,\r\n          handlerName: form.handlerName,\r\n          items: form.items.map(item => ({\r\n            productId: item.productId,\r\n            productName: item.productName,\r\n            quantity: item.quantity,\r\n            unitPrice: item.unitPrice,\r\n            totalPrice: item.totalPrice\r\n          }))\r\n        }\r\n        \r\n        console.log('提交的数据:', submitData)\r\n        \r\n        const response = await fetch(url, {\r\n          method,\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Accept': 'application/json'\r\n          },\r\n          credentials: 'include',\r\n          body: JSON.stringify(submitData)\r\n        })\r\n        \r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`)\r\n        }\r\n        \r\n        const result = await response.json()\r\n        if (result.code === 0) {\r\n          ElMessage.success(id ? '更新成功' : '创建成功')\r\n          router.back()\r\n        } else {\r\n          ElMessage.error(result.message || (id ? '更新失败' : '创建失败'))\r\n        }\r\n      } catch (error) {\r\n        console.error(id ? '更新订单失败:' : '创建订单失败:', error)\r\n        ElMessage.error(id ? '更新失败' : '创建失败')\r\n      } finally {\r\n        submitting.value = false\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\n// 初始化\r\nonMounted(() => {\r\n  getCustomers()\r\n  getHandlers()\r\n  getProducts()\r\n  if (id) {\r\n    getOrderDetail()\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.order-form {\r\n  height: 100%;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.el-form {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.table-footer {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}