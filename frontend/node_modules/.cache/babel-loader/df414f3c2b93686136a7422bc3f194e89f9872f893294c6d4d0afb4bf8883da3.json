{"ast":null,"code":"import _objectSpread from \"C:/Users/indexae/Desktop/scm\\u9000\\u8D27/scm/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.some.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n// 检查用户是否有权限访问该路由\nexport function hasPermission(route, roles) {\n  // 如果用户是管理员，可以访问所有页面\n  if (roles.includes('管理员')) {\n    return true;\n  }\n\n  // 如果路由没有定义roles，则所有人都可以访问\n  if (!route.meta || !route.meta.roles) {\n    return true;\n  }\n\n  // 判断用户角色是否在路由允许的角色列表中\n  return roles.some(function (role) {\n    return route.meta.roles.includes(role);\n  });\n}\n\n// 过滤路由表，只返回用户有权限的路由\nexport function filterRoutes(routes, roles) {\n  var res = [];\n  routes.forEach(function (route) {\n    var tmp = _objectSpread({}, route);\n    if (hasPermission(tmp, roles)) {\n      if (tmp.children) {\n        tmp.children = filterRoutes(tmp.children, roles);\n      }\n      res.push(tmp);\n    }\n  });\n  return res;\n}","map":{"version":3,"names":["hasPermission","route","roles","includes","meta","some","role","filterRoutes","routes","res","forEach","tmp","_objectSpread","children","push"],"sources":["C:/Users/indexae/Desktop/scm退货/scm/frontend/src/utils/permission.js"],"sourcesContent":["// 检查用户是否有权限访问该路由\r\nexport function hasPermission(route, roles) {\r\n  // 如果用户是管理员，可以访问所有页面\r\n  if (roles.includes('管理员')) {\r\n    return true\r\n  }\r\n  \r\n  // 如果路由没有定义roles，则所有人都可以访问\r\n  if (!route.meta || !route.meta.roles) {\r\n    return true\r\n  }\r\n  \r\n  // 判断用户角色是否在路由允许的角色列表中\r\n  return roles.some(role => route.meta.roles.includes(role))\r\n}\r\n\r\n// 过滤路由表，只返回用户有权限的路由\r\nexport function filterRoutes(routes, roles) {\r\n  const res = []\r\n  \r\n  routes.forEach(route => {\r\n    const tmp = { ...route }\r\n    if (hasPermission(tmp, roles)) {\r\n      if (tmp.children) {\r\n        tmp.children = filterRoutes(tmp.children, roles)\r\n      }\r\n      res.push(tmp)\r\n    }\r\n  })\r\n  \r\n  return res\r\n} "],"mappings":";;;;;;;;;;;AAAA;AACA,OAAO,SAASA,aAAaA,CAACC,KAAK,EAAEC,KAAK,EAAE;EAC1C;EACA,IAAIA,KAAK,CAACC,QAAQ,CAAC,KAAK,CAAC,EAAE;IACzB,OAAO,IAAI;EACb;;EAEA;EACA,IAAI,CAACF,KAAK,CAACG,IAAI,IAAI,CAACH,KAAK,CAACG,IAAI,CAACF,KAAK,EAAE;IACpC,OAAO,IAAI;EACb;;EAEA;EACA,OAAOA,KAAK,CAACG,IAAI,CAAC,UAAAC,IAAI;IAAA,OAAIL,KAAK,CAACG,IAAI,CAACF,KAAK,CAACC,QAAQ,CAACG,IAAI,CAAC;EAAA,EAAC;AAC5D;;AAEA;AACA,OAAO,SAASC,YAAYA,CAACC,MAAM,EAAEN,KAAK,EAAE;EAC1C,IAAMO,GAAG,GAAG,EAAE;EAEdD,MAAM,CAACE,OAAO,CAAC,UAAAT,KAAK,EAAI;IACtB,IAAMU,GAAG,GAAAC,aAAA,KAAQX,KAAK,CAAE;IACxB,IAAID,aAAa,CAACW,GAAG,EAAET,KAAK,CAAC,EAAE;MAC7B,IAAIS,GAAG,CAACE,QAAQ,EAAE;QAChBF,GAAG,CAACE,QAAQ,GAAGN,YAAY,CAACI,GAAG,CAACE,QAAQ,EAAEX,KAAK,CAAC;MAClD;MACAO,GAAG,CAACK,IAAI,CAACH,GAAG,CAAC;IACf;EACF,CAAC,CAAC;EAEF,OAAOF,GAAG;AACZ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}