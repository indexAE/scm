{"ast":null,"code":"import _slicedToArray from \"C:/Users/indexae/Desktop/scm\\u9000\\u8D27/scm/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _regeneratorRuntime from \"C:/Users/indexae/Desktop/scm\\u9000\\u8D27/scm/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/indexae/Desktop/scm\\u9000\\u8D27/scm/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { defineStore } from 'pinia';\nimport { ref } from 'vue';\nexport var useSettingsStore = defineStore('settings', function () {\n  var systemName = ref('');\n  var systemDesc = ref('');\n  var passwordMinLength = ref(6);\n  var loginLockEnabled = ref(false);\n  var showWelcome = ref(true);\n  var theme = ref('light');\n\n  // 获取系统设置\n  var fetchSettings = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var res, data;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return fetch('/api/settings');\n          case 3:\n            res = _context.sent;\n            _context.next = 6;\n            return res.json();\n          case 6:\n            data = _context.sent;\n            if (data.code === 200) {\n              systemName.value = data.data.systemName;\n              systemDesc.value = data.data.systemDesc;\n              passwordMinLength.value = data.data.passwordMinLength;\n              loginLockEnabled.value = data.data.loginLockEnabled;\n              showWelcome.value = data.data.showWelcome;\n              theme.value = data.data.theme || 'light';\n              // 更新页面标题\n              document.title = systemName.value;\n              // 应用主题\n              applyTheme(theme.value);\n            }\n            _context.next = 13;\n            break;\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](0);\n            console.error('获取系统设置失败:', _context.t0);\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 10]]);\n    }));\n    return function fetchSettings() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  // 更新系统名称\n  var updateSystemName = function updateSystemName(name) {\n    systemName.value = name;\n    document.title = name;\n  };\n\n  // 更新系统描述\n  var updateSystemDesc = function updateSystemDesc(desc) {\n    systemDesc.value = desc;\n  };\n\n  // 更新密码最小长度\n  var updatePasswordMinLength = function updatePasswordMinLength(length) {\n    passwordMinLength.value = length;\n  };\n\n  // 更新登录锁定状态\n  var updateLoginLockEnabled = function updateLoginLockEnabled(enabled) {\n    loginLockEnabled.value = enabled;\n  };\n\n  // 更新欢迎语显示状态\n  var updateShowWelcome = function updateShowWelcome(show) {\n    showWelcome.value = show;\n  };\n\n  // 更新主题\n  var updateTheme = function updateTheme(newTheme) {\n    theme.value = newTheme;\n    applyTheme(newTheme);\n  };\n\n  // 应用主题\n  var applyTheme = function applyTheme(themeName) {\n    var themes = {\n      light: {\n        '--background-color': '#ffffff',\n        '--text-color': '#2c3e50',\n        '--header-background': '#409eff',\n        '--menu-background': '#ffffff',\n        '--border-color': '#e6e6e6',\n        '--menu-active-background': '#d9ecff',\n        '--menu-active-text-color': '#409eff',\n        '--menu-text-color': '#2c3e50'\n      },\n      dark: {\n        '--background-color': '#1a1a1a',\n        '--text-color': '#e6e6e6',\n        '--header-background': '#2c3e50',\n        '--menu-background': '#2c3e50',\n        '--border-color': '#4c4c4c',\n        '--menu-text-color': '#ffffff',\n        '--menu-active-background': '#1e90ff33',\n        '--menu-active-text-color': '#409eff'\n      },\n      blue: {\n        '--background-color': '#f0f8ff',\n        '--text-color': '#2c3e50',\n        '--header-background': '#1e90ff',\n        '--menu-background': '#ffffff',\n        '--border-color': '#b8d4ff',\n        '--menu-active-background': '#c6e2ff',\n        '--menu-active-text-color': '#1e90ff',\n        '--menu-text-color': '#2c3e50'\n      }\n    };\n    var root = document.documentElement;\n    var themeColors = themes[themeName] || themes.light;\n\n    // 设置CSS变量\n    Object.entries(themeColors).forEach(function (_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n        property = _ref3[0],\n        value = _ref3[1];\n      root.style.setProperty(property, value);\n    });\n\n    // 设置data-theme属性\n    root.setAttribute('data-theme', themeName);\n  };\n\n  // 更新所有系统设置\n  var updateSettings = function updateSettings(settings) {\n    systemName.value = settings.systemName;\n    systemDesc.value = settings.systemDesc;\n    passwordMinLength.value = settings.passwordMinLength;\n    loginLockEnabled.value = settings.loginLockEnabled;\n    showWelcome.value = settings.showWelcome;\n    theme.value = settings.theme || 'light';\n    document.title = settings.systemName;\n    applyTheme(theme.value);\n  };\n  return {\n    systemName: systemName,\n    systemDesc: systemDesc,\n    passwordMinLength: passwordMinLength,\n    loginLockEnabled: loginLockEnabled,\n    showWelcome: showWelcome,\n    theme: theme,\n    fetchSettings: fetchSettings,\n    updateSystemName: updateSystemName,\n    updateSystemDesc: updateSystemDesc,\n    updatePasswordMinLength: updatePasswordMinLength,\n    updateLoginLockEnabled: updateLoginLockEnabled,\n    updateShowWelcome: updateShowWelcome,\n    updateTheme: updateTheme,\n    updateSettings: updateSettings\n  };\n});","map":{"version":3,"names":["defineStore","ref","useSettingsStore","systemName","systemDesc","passwordMinLength","loginLockEnabled","showWelcome","theme","fetchSettings","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","data","wrap","_callee$","_context","prev","next","fetch","sent","json","code","value","document","title","applyTheme","t0","console","error","stop","apply","arguments","updateSystemName","name","updateSystemDesc","desc","updatePasswordMinLength","length","updateLoginLockEnabled","enabled","updateShowWelcome","show","updateTheme","newTheme","themeName","themes","light","dark","blue","root","documentElement","themeColors","Object","entries","forEach","_ref2","_ref3","_slicedToArray","property","style","setProperty","setAttribute","updateSettings","settings"],"sources":["C:/Users/indexae/Desktop/scm退货/scm/frontend/src/stores/settings.js"],"sourcesContent":["import { defineStore } from 'pinia'\nimport { ref } from 'vue'\n\nexport const useSettingsStore = defineStore('settings', () => {\n  const systemName = ref('')\n  const systemDesc = ref('')\n  const passwordMinLength = ref(6)\n  const loginLockEnabled = ref(false)\n  const showWelcome = ref(true)\n  const theme = ref('light')\n  \n  // 获取系统设置\n  const fetchSettings = async () => {\n    try {\n      const res = await fetch('/api/settings')\n      const data = await res.json()\n      if (data.code === 200) {\n        systemName.value = data.data.systemName\n        systemDesc.value = data.data.systemDesc\n        passwordMinLength.value = data.data.passwordMinLength\n        loginLockEnabled.value = data.data.loginLockEnabled\n        showWelcome.value = data.data.showWelcome\n        theme.value = data.data.theme || 'light'\n        // 更新页面标题\n        document.title = systemName.value\n        // 应用主题\n        applyTheme(theme.value)\n      }\n    } catch (error) {\n      console.error('获取系统设置失败:', error)\n    }\n  }\n\n  // 更新系统名称\n  const updateSystemName = (name) => {\n    systemName.value = name\n    document.title = name\n  }\n\n  // 更新系统描述\n  const updateSystemDesc = (desc) => {\n    systemDesc.value = desc\n  }\n\n  // 更新密码最小长度\n  const updatePasswordMinLength = (length) => {\n    passwordMinLength.value = length\n  }\n\n  // 更新登录锁定状态\n  const updateLoginLockEnabled = (enabled) => {\n    loginLockEnabled.value = enabled\n  }\n\n  // 更新欢迎语显示状态\n  const updateShowWelcome = (show) => {\n    showWelcome.value = show\n  }\n\n  // 更新主题\n  const updateTheme = (newTheme) => {\n    theme.value = newTheme\n    applyTheme(newTheme)\n  }\n\n  // 应用主题\n  const applyTheme = (themeName) => {\n    const themes = {\n      light: {\n        '--background-color': '#ffffff',\n        '--text-color': '#2c3e50',\n        '--header-background': '#409eff',\n        '--menu-background': '#ffffff',\n        '--border-color': '#e6e6e6',\n        '--menu-active-background': '#d9ecff',\n        '--menu-active-text-color': '#409eff',\n        '--menu-text-color': '#2c3e50'\n      },\n      dark: {\n        '--background-color': '#1a1a1a',\n        '--text-color': '#e6e6e6',\n        '--header-background': '#2c3e50',\n        '--menu-background': '#2c3e50',\n        '--border-color': '#4c4c4c',\n        '--menu-text-color': '#ffffff',\n        '--menu-active-background': '#1e90ff33',\n        '--menu-active-text-color': '#409eff'\n      },\n      blue: {\n        '--background-color': '#f0f8ff',\n        '--text-color': '#2c3e50',\n        '--header-background': '#1e90ff',\n        '--menu-background': '#ffffff',\n        '--border-color': '#b8d4ff',\n        '--menu-active-background': '#c6e2ff',\n        '--menu-active-text-color': '#1e90ff',\n        '--menu-text-color': '#2c3e50'\n      }\n    }\n\n    const root = document.documentElement\n    const themeColors = themes[themeName] || themes.light\n\n    // 设置CSS变量\n    Object.entries(themeColors).forEach(([property, value]) => {\n      root.style.setProperty(property, value)\n    })\n\n    // 设置data-theme属性\n    root.setAttribute('data-theme', themeName)\n  }\n\n  // 更新所有系统设置\n  const updateSettings = (settings) => {\n    systemName.value = settings.systemName\n    systemDesc.value = settings.systemDesc\n    passwordMinLength.value = settings.passwordMinLength\n    loginLockEnabled.value = settings.loginLockEnabled\n    showWelcome.value = settings.showWelcome\n    theme.value = settings.theme || 'light'\n    document.title = settings.systemName\n    applyTheme(theme.value)\n  }\n\n  return {\n    systemName,\n    systemDesc,\n    passwordMinLength,\n    loginLockEnabled,\n    showWelcome,\n    theme,\n    fetchSettings,\n    updateSystemName,\n    updateSystemDesc,\n    updatePasswordMinLength,\n    updateLoginLockEnabled,\n    updateShowWelcome,\n    updateTheme,\n    updateSettings\n  }\n}) "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}