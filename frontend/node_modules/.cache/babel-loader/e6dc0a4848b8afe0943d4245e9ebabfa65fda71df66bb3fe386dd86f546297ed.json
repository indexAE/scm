{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/indexae/Desktop/scm\\u65E5\\u5FD7/scm/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/indexae/Desktop/scm\\u65E5\\u5FD7/scm/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { defineStore } from 'pinia';\nimport { ref } from 'vue';\nexport var useSettingsStore = defineStore('settings', function () {\n  var systemName = ref('');\n  var systemDesc = ref('');\n  var passwordMinLength = ref(6);\n  var loginLockEnabled = ref(false);\n  var showWelcome = ref(true);\n\n  // 获取系统设置\n  var fetchSettings = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var res, data;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return fetch('http://localhost:8000/api/settings', {\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              credentials: 'include'\n            });\n          case 3:\n            res = _context.sent;\n            _context.next = 6;\n            return res.json();\n          case 6:\n            data = _context.sent;\n            if (data.code === 0) {\n              systemName.value = data.data.systemName;\n              systemDesc.value = data.data.systemDesc;\n              passwordMinLength.value = data.data.passwordMinLength;\n              loginLockEnabled.value = data.data.loginLockEnabled;\n              showWelcome.value = data.data.showWelcome;\n              // 更新页面标题\n              document.title = systemName.value;\n            }\n            _context.next = 13;\n            break;\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](0);\n            console.error('获取系统设置失败:', _context.t0);\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 10]]);\n    }));\n    return function fetchSettings() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  // 更新系统名称\n  var updateSystemName = function updateSystemName(name) {\n    systemName.value = name;\n    document.title = name;\n  };\n\n  // 更新系统描述\n  var updateSystemDesc = function updateSystemDesc(desc) {\n    systemDesc.value = desc;\n  };\n\n  // 更新密码最小长度\n  var updatePasswordMinLength = function updatePasswordMinLength(length) {\n    passwordMinLength.value = length;\n  };\n\n  // 更新登录锁定状态\n  var updateLoginLockEnabled = function updateLoginLockEnabled(enabled) {\n    loginLockEnabled.value = enabled;\n  };\n\n  // 更新欢迎语显示状态\n  var updateShowWelcome = function updateShowWelcome(show) {\n    showWelcome.value = show;\n  };\n\n  // 更新所有系统设置\n  var updateSettings = function updateSettings(settings) {\n    systemName.value = settings.systemName;\n    systemDesc.value = settings.systemDesc;\n    passwordMinLength.value = settings.passwordMinLength;\n    loginLockEnabled.value = settings.loginLockEnabled;\n    showWelcome.value = settings.showWelcome;\n    document.title = settings.systemName;\n  };\n  return {\n    systemName: systemName,\n    systemDesc: systemDesc,\n    passwordMinLength: passwordMinLength,\n    loginLockEnabled: loginLockEnabled,\n    showWelcome: showWelcome,\n    fetchSettings: fetchSettings,\n    updateSystemName: updateSystemName,\n    updateSystemDesc: updateSystemDesc,\n    updatePasswordMinLength: updatePasswordMinLength,\n    updateLoginLockEnabled: updateLoginLockEnabled,\n    updateShowWelcome: updateShowWelcome,\n    updateSettings: updateSettings\n  };\n});","map":{"version":3,"names":["defineStore","ref","useSettingsStore","systemName","systemDesc","passwordMinLength","loginLockEnabled","showWelcome","fetchSettings","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","data","wrap","_callee$","_context","prev","next","fetch","headers","credentials","sent","json","code","value","document","title","t0","console","error","stop","apply","arguments","updateSystemName","name","updateSystemDesc","desc","updatePasswordMinLength","length","updateLoginLockEnabled","enabled","updateShowWelcome","show","updateSettings","settings"],"sources":["C:/Users/indexae/Desktop/scm日志/scm/frontend/src/stores/settings.js"],"sourcesContent":["import { defineStore } from 'pinia'\r\nimport { ref } from 'vue'\r\n\r\nexport const useSettingsStore = defineStore('settings', () => {\r\n  const systemName = ref('')\r\n  const systemDesc = ref('')\r\n  const passwordMinLength = ref(6)\r\n  const loginLockEnabled = ref(false)\r\n  const showWelcome = ref(true)\r\n  \r\n  // 获取系统设置\r\n  const fetchSettings = async () => {\r\n    try {\r\n      const res = await fetch('http://localhost:8000/api/settings', {\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        credentials: 'include'\r\n      })\r\n      const data = await res.json()\r\n      if (data.code === 0) {\r\n        systemName.value = data.data.systemName\r\n        systemDesc.value = data.data.systemDesc\r\n        passwordMinLength.value = data.data.passwordMinLength\r\n        loginLockEnabled.value = data.data.loginLockEnabled\r\n        showWelcome.value = data.data.showWelcome\r\n        // 更新页面标题\r\n        document.title = systemName.value\r\n      }\r\n    } catch (error) {\r\n      console.error('获取系统设置失败:', error)\r\n    }\r\n  }\r\n\r\n  // 更新系统名称\r\n  const updateSystemName = (name) => {\r\n    systemName.value = name\r\n    document.title = name\r\n  }\r\n\r\n  // 更新系统描述\r\n  const updateSystemDesc = (desc) => {\r\n    systemDesc.value = desc\r\n  }\r\n\r\n  // 更新密码最小长度\r\n  const updatePasswordMinLength = (length) => {\r\n    passwordMinLength.value = length\r\n  }\r\n\r\n  // 更新登录锁定状态\r\n  const updateLoginLockEnabled = (enabled) => {\r\n    loginLockEnabled.value = enabled\r\n  }\r\n\r\n  // 更新欢迎语显示状态\r\n  const updateShowWelcome = (show) => {\r\n    showWelcome.value = show\r\n  }\r\n\r\n  // 更新所有系统设置\r\n  const updateSettings = (settings) => {\r\n    systemName.value = settings.systemName\r\n    systemDesc.value = settings.systemDesc\r\n    passwordMinLength.value = settings.passwordMinLength\r\n    loginLockEnabled.value = settings.loginLockEnabled\r\n    showWelcome.value = settings.showWelcome\r\n    document.title = settings.systemName\r\n  }\r\n\r\n  return {\r\n    systemName,\r\n    systemDesc,\r\n    passwordMinLength,\r\n    loginLockEnabled,\r\n    showWelcome,\r\n    fetchSettings,\r\n    updateSystemName,\r\n    updateSystemDesc,\r\n    updatePasswordMinLength,\r\n    updateLoginLockEnabled,\r\n    updateShowWelcome,\r\n    updateSettings\r\n  }\r\n}) "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}