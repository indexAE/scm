{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/indexae/Desktop/scm/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/indexae/Desktop/scm/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { defineStore } from 'pinia';\nimport { ref } from 'vue';\nexport var useSettingsStore = defineStore('settings', function () {\n  var systemName = ref('');\n  var systemDesc = ref('');\n\n  // 获取系统设置\n  var fetchSettings = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var res, data;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return fetch('http://localhost:8000/api/settings', {\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              credentials: 'include'\n            });\n          case 3:\n            res = _context.sent;\n            _context.next = 6;\n            return res.json();\n          case 6:\n            data = _context.sent;\n            if (data.code === 0) {\n              systemName.value = data.data.systemName;\n              systemDesc.value = data.data.systemDesc;\n              // 更新页面标题\n              document.title = systemName.value;\n            }\n            _context.next = 13;\n            break;\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](0);\n            console.error('获取系统设置失败:', _context.t0);\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 10]]);\n    }));\n    return function fetchSettings() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  // 更新系统名称\n  var updateSystemName = function updateSystemName(name) {\n    systemName.value = name;\n    document.title = name;\n  };\n\n  // 更新系统描述\n  var updateSystemDesc = function updateSystemDesc(desc) {\n    systemDesc.value = desc;\n  };\n\n  // 更新所有系统设置\n  var updateSettings = function updateSettings(settings) {\n    systemName.value = settings.systemName;\n    systemDesc.value = settings.systemDesc;\n    document.title = settings.systemName;\n  };\n  return {\n    systemName: systemName,\n    systemDesc: systemDesc,\n    fetchSettings: fetchSettings,\n    updateSystemName: updateSystemName,\n    updateSystemDesc: updateSystemDesc,\n    updateSettings: updateSettings\n  };\n});","map":{"version":3,"names":["defineStore","ref","useSettingsStore","systemName","systemDesc","fetchSettings","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","data","wrap","_callee$","_context","prev","next","fetch","headers","credentials","sent","json","code","value","document","title","t0","console","error","stop","apply","arguments","updateSystemName","name","updateSystemDesc","desc","updateSettings","settings"],"sources":["C:/Users/indexae/Desktop/scm/frontend/src/stores/settings.js"],"sourcesContent":["import { defineStore } from 'pinia'\r\nimport { ref } from 'vue'\r\n\r\nexport const useSettingsStore = defineStore('settings', () => {\r\n  const systemName = ref('')\r\n  const systemDesc = ref('')\r\n  \r\n  // 获取系统设置\r\n  const fetchSettings = async () => {\r\n    try {\r\n      const res = await fetch('http://localhost:8000/api/settings', {\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        credentials: 'include'\r\n      })\r\n      const data = await res.json()\r\n      if (data.code === 0) {\r\n        systemName.value = data.data.systemName\r\n        systemDesc.value = data.data.systemDesc\r\n        // 更新页面标题\r\n        document.title = systemName.value\r\n      }\r\n    } catch (error) {\r\n      console.error('获取系统设置失败:', error)\r\n    }\r\n  }\r\n\r\n  // 更新系统名称\r\n  const updateSystemName = (name) => {\r\n    systemName.value = name\r\n    document.title = name\r\n  }\r\n\r\n  // 更新系统描述\r\n  const updateSystemDesc = (desc) => {\r\n    systemDesc.value = desc\r\n  }\r\n\r\n  // 更新所有系统设置\r\n  const updateSettings = (settings) => {\r\n    systemName.value = settings.systemName\r\n    systemDesc.value = settings.systemDesc\r\n    document.title = settings.systemName\r\n  }\r\n\r\n  return {\r\n    systemName,\r\n    systemDesc,\r\n    fetchSettings,\r\n    updateSystemName,\r\n    updateSystemDesc,\r\n    updateSettings\r\n  }\r\n}) "],"mappings":";;;AAAA,SAASA,WAAW,QAAQ,OAAO;AACnC,SAASC,GAAG,QAAQ,KAAK;AAEzB,OAAO,IAAMC,gBAAgB,GAAGF,WAAW,CAAC,UAAU,EAAE,YAAM;EAC5D,IAAMG,UAAU,GAAGF,GAAG,CAAC,EAAE,CAAC;EAC1B,IAAMG,UAAU,GAAGH,GAAG,CAAC,EAAE,CAAC;;EAE1B;EACA,IAAMI,aAAa;IAAA,IAAAC,IAAA,GAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA;MAAA,IAAAC,GAAA,EAAAC,IAAA;MAAA,OAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAAF,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAE,IAAA;YAAA,OAEAC,KAAK,CAAC,oCAAoC,EAAE;cAC5DC,OAAO,EAAE;gBACP,cAAc,EAAE;cAClB,CAAC;cACDC,WAAW,EAAE;YACf,CAAC,CAAC;UAAA;YALIT,GAAG,GAAAI,QAAA,CAAAM,IAAA;YAAAN,QAAA,CAAAE,IAAA;YAAA,OAMUN,GAAG,CAACW,IAAI,CAAC,CAAC;UAAA;YAAvBV,IAAI,GAAAG,QAAA,CAAAM,IAAA;YACV,IAAIT,IAAI,CAACW,IAAI,KAAK,CAAC,EAAE;cACnBpB,UAAU,CAACqB,KAAK,GAAGZ,IAAI,CAACA,IAAI,CAACT,UAAU;cACvCC,UAAU,CAACoB,KAAK,GAAGZ,IAAI,CAACA,IAAI,CAACR,UAAU;cACvC;cACAqB,QAAQ,CAACC,KAAK,GAAGvB,UAAU,CAACqB,KAAK;YACnC;YAACT,QAAA,CAAAE,IAAA;YAAA;UAAA;YAAAF,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAY,EAAA,GAAAZ,QAAA;YAEDa,OAAO,CAACC,KAAK,CAAC,WAAW,EAAAd,QAAA,CAAAY,EAAO,CAAC;UAAA;UAAA;YAAA,OAAAZ,QAAA,CAAAe,IAAA;QAAA;MAAA,GAAApB,OAAA;IAAA,CAEpC;IAAA,gBAlBKL,aAAaA,CAAA;MAAA,OAAAC,IAAA,CAAAyB,KAAA,OAAAC,SAAA;IAAA;EAAA,GAkBlB;;EAED;EACA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIC,IAAI,EAAK;IACjC/B,UAAU,CAACqB,KAAK,GAAGU,IAAI;IACvBT,QAAQ,CAACC,KAAK,GAAGQ,IAAI;EACvB,CAAC;;EAED;EACA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIC,IAAI,EAAK;IACjChC,UAAU,CAACoB,KAAK,GAAGY,IAAI;EACzB,CAAC;;EAED;EACA,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAIC,QAAQ,EAAK;IACnCnC,UAAU,CAACqB,KAAK,GAAGc,QAAQ,CAACnC,UAAU;IACtCC,UAAU,CAACoB,KAAK,GAAGc,QAAQ,CAAClC,UAAU;IACtCqB,QAAQ,CAACC,KAAK,GAAGY,QAAQ,CAACnC,UAAU;EACtC,CAAC;EAED,OAAO;IACLA,UAAU,EAAVA,UAAU;IACVC,UAAU,EAAVA,UAAU;IACVC,aAAa,EAAbA,aAAa;IACb4B,gBAAgB,EAAhBA,gBAAgB;IAChBE,gBAAgB,EAAhBA,gBAAgB;IAChBE,cAAc,EAAdA;EACF,CAAC;AACH,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}